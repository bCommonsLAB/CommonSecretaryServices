
<!doctype html>
<html lang="de" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://example.local/print_page/">
      
      
      
      
      <link rel="icon" href="../assets/images/logo.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.17">
    
    
      
        <title>Gesamtdokumentation - Common Secretary Services</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.7e37652d.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/print-site.css">
    
      <link rel="stylesheet" href="../css/print-site-material.css">
    
    <script>__md_scope=new URL("/",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  
        <script type="text/javascript">
        document.addEventListener('DOMContentLoaded', function () {
            remove_material_navigation();remove_mkdocs_theme_navigation();generate_toc();
        })
        </script>
        </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#index" class="md-skip">
          Zum Inhalt
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Kopfzeile">
    <a href=".." title="Common Secretary Services" class="md-header__button md-logo" aria-label="Common Secretary Services" data-md-component="logo">
      
  <img src="../assets/images/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Common Secretary Services
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Gesamtdokumentation
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Suche" placeholder="Suche" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Suche">
        
        <button type="reset" class="md-search__icon md-icon" title="Zurücksetzen" aria-label="Zurücksetzen" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Suche wird initialisiert
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://example.local/repo" title="Zum Repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    Example
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Common Secretary Services" class="md-nav__button md-logo" aria-label="Common Secretary Services" data-md-component="logo">
      
  <img src="../assets/images/logo.png" alt="logo">

    </a>
    Common Secretary Services
  </label>
  
    <div class="md-nav__source">
      <a href="https://example.local/repo" title="Zum Repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    Example
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    « Zur Anwendung
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Guide
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_1" >
        
          
          <label class="md-nav__link" for="__nav_3_1" id="__nav_3_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_1">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guide/getting-started/installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  
    
  
  
    <span class="md-status md-status--draft"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guide/getting-started/development/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Development
    
  </span>
  
    
  
  
    <span class="md-status md-status--draft"></span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    UI
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            UI
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guide/ui/dashboard/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Dashboard
    
  </span>
  
    
  
  
    <span class="md-status md-status--draft"></span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    How‑Tos
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            How‑Tos
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guide/how-tos/session-archive/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Session‑Archive
    
  </span>
  
    
  
  
    <span class="md-status md-status--draft"></span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Explanations
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Explanations
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Architektur
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            Architektur
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../explanations/architecture/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Überblick
    
  </span>
  
    
  
  
    <span class="md-status md-status--draft"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../explanations/architecture/details/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Details
    
  </span>
  
    
  
  
    <span class="md-status md-status--draft"></span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Async Events
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Async Events
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../explanations/async-events/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Überblick
    
  </span>
  
    
  
  
    <span class="md-status md-status--draft"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../explanations/async-events/generic-worker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Generischer Worker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../explanations/async-events/secretary-job-worker-concept/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Secretary Job Worker – Konzept
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../explanations/async-events/how-to-n8n/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    n8n
    
  </span>
  
    
  
  
    <span class="md-status md-status--draft"></span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../explanations/caching/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Caching
    
  </span>
  
    
  
  
    <span class="md-status md-status--draft"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../explanations/templates/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Templates
    
  </span>
  
    
  
  
    <span class="md-status md-status--draft"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../explanations/types/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Typen & Dataclasses
    
  </span>
  
    
  
  
    <span class="md-status md-status--draft"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../explanations/metaprocessor/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Metaprocessor
    
  </span>
  
    
  
  
    <span class="md-status md-status--draft"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../explanations/metadata/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Metadaten
    
  </span>
  
    
  
  
    <span class="md-status md-status--draft"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../explanations/llm/optimization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    LLM‑Optimierung
    
  </span>
  
    
  
  
    <span class="md-status md-status--draft"></span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Processors
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Processors
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../processors/audio/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Audio
    
  </span>
  
    
  
  
    <span class="md-status md-status--draft"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../processors/video/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Video
    
  </span>
  
    
  
  
    <span class="md-status md-status--draft"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3" >
        
          
          <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    PDF
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            PDF
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../processors/pdf/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Überblick
    
  </span>
  
    
  
  
    <span class="md-status md-status--draft"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../processors/pdf/ocr-refactoring/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OCR-Refactoring
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../processors/pdf/endpoints/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    PDF/ImageOCR Details
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../processors/image-ocr/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Image-OCR
    
  </span>
  
    
  
  
    <span class="md-status md-status--draft"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../processors/transformer/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Transformer
    
  </span>
  
    
  
  
    <span class="md-status md-status--draft"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../processors/session/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Session
    
  </span>
  
    
  
  
    <span class="md-status md-status--draft"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../processors/event-job/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Event-Job
    
  </span>
  
    
  
  
    <span class="md-status md-status--draft"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../processors/story/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Story
    
  </span>
  
    
  
  
    <span class="md-status md-status--draft"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../processors/track/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Track
    
  </span>
  
    
  
  
    <span class="md-status md-status--draft"></span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/api/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    API Überblick
    
  </span>
  
    
  
  
    <span class="md-status md-status--draft"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../reference/api/openapi/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    OpenAPI / Swagger
    
  </span>
  
    
  
  
    <span class="md-status md-status--draft"></span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Ops
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Ops
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ops/deployment/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Deployment
    
  </span>
  
    
  
  
    <span class="md-status md-status--draft"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ops/security/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sicherheit
    
  </span>
  
    
  
  
    <span class="md-status md-status--draft"></span>
  

  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ops/troubleshooting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Troubleshooting
    
  </span>
  
    
  
  
    <span class="md-status md-status--draft"></span>
  

  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Inhaltsverzeichnis">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Inhaltsverzeichnis
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#index" class="md-nav__link">
    <span class="md-ellipsis">
      2 Home
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-3" class="md-nav__link">
    <span class="md-ellipsis">
      3 Guide
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3 Guide">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#section-3-1" class="md-nav__link">
    <span class="md-ellipsis">
      3.1 Getting Started
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.1 Getting Started">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#guide-getting-started-installation" class="md-nav__link">
    <span class="md-ellipsis">
      3.1.1 Installation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#guide-getting-started-development" class="md-nav__link">
    <span class="md-ellipsis">
      3.1.2 Development
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#section-3-2" class="md-nav__link">
    <span class="md-ellipsis">
      3.2 UI
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.2 UI">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#guide-ui-dashboard" class="md-nav__link">
    <span class="md-ellipsis">
      3.2.1 Dashboard
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#section-3-3" class="md-nav__link">
    <span class="md-ellipsis">
      3.3 How‑Tos
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3.3 How‑Tos">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#guide-how-tos-session-archive" class="md-nav__link">
    <span class="md-ellipsis">
      3.3.1 Session‑Archive
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-4" class="md-nav__link">
    <span class="md-ellipsis">
      4 Explanations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4 Explanations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#section-4-1" class="md-nav__link">
    <span class="md-ellipsis">
      4.1 Architektur
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4.1 Architektur">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#explanations-architecture-overview" class="md-nav__link">
    <span class="md-ellipsis">
      4.1.1 Überblick
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#explanations-architecture-details" class="md-nav__link">
    <span class="md-ellipsis">
      4.1.2 Details
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#section-4-2" class="md-nav__link">
    <span class="md-ellipsis">
      4.2 Async Events
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4.2 Async Events">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#explanations-async-events-overview" class="md-nav__link">
    <span class="md-ellipsis">
      4.2.1 Überblick
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#explanations-async-events-generic-worker" class="md-nav__link">
    <span class="md-ellipsis">
      4.2.2 Generischer Worker
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#explanations-async-events-secretary-job-worker-concept" class="md-nav__link">
    <span class="md-ellipsis">
      4.2.3 Secretary Job Worker – Konzept
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#explanations-async-events-how-to-n8n" class="md-nav__link">
    <span class="md-ellipsis">
      4.2.4 n8n
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#explanations-caching-overview" class="md-nav__link">
    <span class="md-ellipsis">
      4.3 Caching
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#explanations-templates-overview" class="md-nav__link">
    <span class="md-ellipsis">
      4.4 Templates
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#explanations-types-overview" class="md-nav__link">
    <span class="md-ellipsis">
      4.5 Typen & Dataclasses
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#explanations-metaprocessor-overview" class="md-nav__link">
    <span class="md-ellipsis">
      4.6 Metaprocessor
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#explanations-metadata-overview" class="md-nav__link">
    <span class="md-ellipsis">
      4.7 Metadaten
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#explanations-llm-optimization" class="md-nav__link">
    <span class="md-ellipsis">
      4.8 LLM‑Optimierung
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-5" class="md-nav__link">
    <span class="md-ellipsis">
      5 Processors
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5 Processors">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#processors-audio-overview" class="md-nav__link">
    <span class="md-ellipsis">
      5.1 Audio
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#processors-video-overview" class="md-nav__link">
    <span class="md-ellipsis">
      5.2 Video
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#section-5-3" class="md-nav__link">
    <span class="md-ellipsis">
      5.3 PDF
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5.3 PDF">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#processors-pdf-overview" class="md-nav__link">
    <span class="md-ellipsis">
      5.3.1 Überblick
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#processors-pdf-ocr-refactoring" class="md-nav__link">
    <span class="md-ellipsis">
      5.3.2 OCR-Refactoring
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#processors-pdf-endpoints" class="md-nav__link">
    <span class="md-ellipsis">
      5.3.3 PDF/ImageOCR Details
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#processors-image-ocr-overview" class="md-nav__link">
    <span class="md-ellipsis">
      5.4 Image-OCR
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#processors-transformer-overview" class="md-nav__link">
    <span class="md-ellipsis">
      5.5 Transformer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#processors-session-overview" class="md-nav__link">
    <span class="md-ellipsis">
      5.6 Session
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#processors-event-job-overview" class="md-nav__link">
    <span class="md-ellipsis">
      5.7 Event-Job
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#processors-story-overview" class="md-nav__link">
    <span class="md-ellipsis">
      5.8 Story
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#processors-track-overview" class="md-nav__link">
    <span class="md-ellipsis">
      5.9 Track
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-6" class="md-nav__link">
    <span class="md-ellipsis">
      6 Reference
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6 Reference">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#reference-api-overview" class="md-nav__link">
    <span class="md-ellipsis">
      6.1 API Überblick
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reference-api-openapi" class="md-nav__link">
    <span class="md-ellipsis">
      6.2 OpenAPI / Swagger
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#section-7" class="md-nav__link">
    <span class="md-ellipsis">
      7 Ops
    </span>
  </a>
  
    <nav class="md-nav" aria-label="7 Ops">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#ops-deployment" class="md-nav__link">
    <span class="md-ellipsis">
      7.1 Deployment
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ops-security" class="md-nav__link">
    <span class="md-ellipsis">
      7.2 Sicherheit
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ops-troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      7.3 Troubleshooting
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<div id="print-site-page" class="print-site-enumerate-headings print-site-enumerate-figures">
        <section class="print-page">
            <div id="print-page-toc" data-toc-depth="3">
                <nav role='navigation' class='print-page-toc-nav'>
                <h1 class='print-page-toc-title'>Table of Contents</h1>
                </nav>
            </div>
        </section>
        <section class="print-page" id="index" heading-number="2"><blockquote>
<p>Zur Anwendung zurück: <a href="#index">/</a></p>
</blockquote>
<hr />
<p>status: draft
last_verified: 2025-08-15</p>
<hr />
<h1 id="index-common-secretary-services">Common Secretary Services<a class="headerlink" href="#index-common-secretary-services" title="Permanent link">&para;</a></h1>
<p>Willkommen zur Dokumentation. Dieses Projekt verarbeitet Medien (Audio, Video, PDF/Bilder) und erzeugt strukturierte Ergebnisse (Markdown/JSON) über eine REST‑API mit Flask‑RESTX.</p>
<h2 id="index-schnellstart">Schnellstart<a class="headerlink" href="#index-schnellstart" title="Permanent link">&para;</a></h2>
<p><div class="highlight"><pre><span></span><code><span class="c"># Windows</span>
<span class="n">venv</span><span class="p">\</span><span class="n">Scripts</span><span class="p">\</span><span class="n">activate</span>
<span class="nv">$env:PYTHONPATH</span> <span class="p">=</span> <span class="s2">&quot;.&quot;</span>
<span class="n">python</span> <span class="n">src</span><span class="p">/</span><span class="n">main</span><span class="p">.</span><span class="n">py</span>
</code></pre></div>
- Swagger UI: <code>http://127.0.0.1:5000/api/doc</code>
- OpenAPI JSON: <code>http://127.0.0.1:5000/api/swagger.json</code></p>
<h2 id="index-bereiche">Bereiche<a class="headerlink" href="#index-bereiche" title="Permanent link">&para;</a></h2>
<ul>
<li>Guide</li>
<li>Getting Started → <a href="#guide-getting-started-installation">Installation</a>, <a href="#guide-getting-started-development">Development</a></li>
<li>How‑Tos → <a href="#guide-how-tos-session-archive">Session‑Archive</a></li>
<li>UI → <a href="#guide-ui-dashboard">Dashboard</a></li>
<li>Explanations</li>
<li>Architektur → <a href="#explanations-architecture-overview">Überblick</a>, <a href="#explanations-architecture-details">Details</a></li>
<li>Async Events → <a href="#explanations-async-events-overview">Überblick</a>, <a href="#explanations-async-events-how-to-n8n">n8n How‑To</a></li>
<li>Caching → <a href="#explanations-caching-overview">Übersicht</a></li>
<li>Templates → <a href="#explanations-templates-overview">Übersicht</a></li>
<li>Typen → <a href="#explanations-types-overview">Übersicht</a></li>
<li>Metaprocessor → <a href="#explanations-metaprocessor-overview">Überblick</a></li>
<li>Metadaten → <a href="#explanations-metadata-overview">Überblick</a></li>
<li>LLM → <a href="#explanations-llm-optimization">Optimierung</a></li>
<li>Processors</li>
<li>Audio → <a href="#processors-audio-overview">Overview</a></li>
<li>Video → <a href="#processors-video-overview">Overview</a></li>
<li>PDF → <a href="#processors-pdf-overview">Overview</a>, <a href="#processors-pdf-ocr-refactoring">OCR‑Refactoring</a>, <a href="#processors-pdf-endpoints">Endpoints</a></li>
<li>Image‑OCR → <a href="#processors-image-ocr-overview">Overview</a></li>
<li>Transformer → <a href="#processors-transformer-overview">Overview</a></li>
<li>Session → <a href="#processors-session-overview">Overview</a></li>
<li>Event‑Job → <a href="#processors-event-job-overview">Overview</a></li>
<li>Story → <a href="#processors-story-overview">Overview</a></li>
<li>Track → <a href="#processors-track-overview">Overview</a></li>
<li>Reference</li>
<li>API → <a href="#reference-api-overview">Überblick</a>, <a href="#reference-api-openapi">OpenAPI</a></li>
<li>Ops → <a href="#ops-deployment">Deployment</a>, <a href="#ops-security">Sicherheit</a>, <a href="#ops-troubleshooting">Troubleshooting</a></li>
<li>Analysis → <a href="#_analysis-docs_inventory.md">Inventur</a>, <a href="#_analysis-routes_index.md">Routes‑Index</a>, <a href="#_analysis-drift_audit.md">Drift‑Audit</a></li>
</ul>
<h2 id="index-responsestandard-kurz">Response‑Standard (Kurz)<a class="headerlink" href="#index-responsestandard-kurz" title="Permanent link">&para;</a></h2>
<ul>
<li><code>status</code> (success/error), <code>request</code>, <code>process</code>, <code>data</code>, <code>error</code></li>
<li>LLM‑Tracking: <code>process.llm_info</code>, Zeit in Millisekunden</li>
</ul>
<p>Viel Erfolg!</p></section>
                    <section class='print-page md-section' id='section-3' heading-number='3'>
                        <h1>Guide<a class='headerlink' href='#section-3' title='Permanent link'></a>
                        </h1>
                    
                    <section class='print-page md-section' id='section-3-1' heading-number='3.1'>
                        <h1>Getting Started<a class='headerlink' href='#section-3-1' title='Permanent link'></a>
                        </h1>
                    <section class="print-page" id="guide-getting-started-installation" heading-number="3.1.1"><h1 id="guide-getting-started-installation-installation-und-setup">Installation und Setup<a class="headerlink" href="#guide-getting-started-installation-installation-und-setup" title="Permanent link">&para;</a></h1>
<h2 id="guide-getting-started-installation-systemvoraussetzungen">Systemvoraussetzungen<a class="headerlink" href="#guide-getting-started-installation-systemvoraussetzungen" title="Permanent link">&para;</a></h2>
<h3 id="guide-getting-started-installation-software">Software<a class="headerlink" href="#guide-getting-started-installation-software" title="Permanent link">&para;</a></h3>
<ul>
<li>Python 3.10+</li>
<li>FFmpeg für Audio/Video-Verarbeitung</li>
<li>Git</li>
<li>Docker (optional)</li>
</ul>
<h3 id="guide-getting-started-installation-hardware">Hardware<a class="headerlink" href="#guide-getting-started-installation-hardware" title="Permanent link">&para;</a></h3>
<ul>
<li>≥ 4GB RAM</li>
<li>≥ 10GB Speicher</li>
</ul>
<h2 id="guide-getting-started-installation-lokale-installation">Lokale Installation<a class="headerlink" href="#guide-getting-started-installation-lokale-installation" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code>git<span class="w"> </span>clone<span class="w"> </span>&lt;repository-url&gt;
<span class="nb">cd</span><span class="w"> </span>CommonSecretaryServices
python<span class="w"> </span>-m<span class="w"> </span>venv<span class="w"> </span>venv
<span class="c1"># Windows</span>
venv<span class="se">\S</span>cripts<span class="se">\a</span>ctivate
<span class="c1"># Linux/macOS</span>
<span class="c1"># source venv/bin/activate</span>
pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt
</code></pre></div>
<h2 id="guide-getting-started-installation-konfiguration">Konfiguration<a class="headerlink" href="#guide-getting-started-installation-konfiguration" title="Permanent link">&para;</a></h2>
<h3 id="guide-getting-started-installation-env">.env<a class="headerlink" href="#guide-getting-started-installation-env" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>OPENAI_API_KEY=your-openai-key
YOUTUBE_API_KEY=your-youtube-key
DEBUG=True
</code></pre></div>
<h3 id="guide-getting-started-installation-configconfigyaml-ausschnitt">config/config.yaml (Ausschnitt)<a class="headerlink" href="#guide-getting-started-installation-configconfigyaml-ausschnitt" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nt">server</span><span class="p">:</span>
<span class="w">  </span><span class="nt">host</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;127.0.0.1&quot;</span>
<span class="w">  </span><span class="nt">port</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">5000</span>
<span class="w">  </span><span class="nt">debug</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div>
<h2 id="guide-getting-started-installation-start-tests">Start &amp; Tests<a class="headerlink" href="#guide-getting-started-installation-start-tests" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="c1"># Server starten</span>
python<span class="w"> </span>src/main.py

<span class="c1"># API-Test (Audio)</span>
curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: multipart/form-data&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-F<span class="w"> </span><span class="s2">&quot;file=@tests/samples/sample_audio.m4a&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>http://localhost:5000/api/audio/process
</code></pre></div>
<h2 id="guide-getting-started-installation-docker-optional">Docker (optional)<a class="headerlink" href="#guide-getting-started-installation-docker-optional" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>build<span class="w"> </span>-t<span class="w"> </span>secretary-services<span class="w"> </span>.
docker<span class="w"> </span>run<span class="w"> </span>-p<span class="w"> </span><span class="m">5000</span>:5000<span class="w"> </span>secretary-services
</code></pre></div></section><section class="print-page" id="guide-getting-started-development" heading-number="3.1.2"><h1 id="guide-getting-started-development-entwicklung">Entwicklung<a class="headerlink" href="#guide-getting-started-development-entwicklung" title="Permanent link">&para;</a></h1>
<h2 id="guide-getting-started-development-umgebung">Umgebung<a class="headerlink" href="#guide-getting-started-development-umgebung" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="n">venv</span><span class="p">\</span><span class="n">Scripts</span><span class="p">\</span><span class="n">activate</span>
<span class="nv">$env:PYTHONPATH</span> <span class="p">=</span> <span class="s2">&quot;.&quot;</span>
<span class="n">python</span> <span class="n">src</span><span class="p">/</span><span class="n">main</span><span class="p">.</span><span class="n">py</span>
</code></pre></div>
<h2 id="guide-getting-started-development-lint-typen">Lint &amp; Typen<a class="headerlink" href="#guide-getting-started-development-lint-typen" title="Permanent link">&para;</a></h2>
<p><div class="highlight"><pre><span></span><code>ruff<span class="w"> </span>check<span class="w"> </span>.
mypy<span class="w"> </span>--config-file<span class="w"> </span>mypy.ini
</code></pre></div>
- PEP8/Zeilenlänge ~100
- Strikte Type Hints, keine <code>Any</code> in öffentlichen APIs
- Docstrings im Google‑Format</p>
<h2 id="guide-getting-started-development-asyncsync">Async/Sync<a class="headerlink" href="#guide-getting-started-development-asyncsync" title="Permanent link">&para;</a></h2>
<ul>
<li>I/O/Netzwerk/API → async</li>
<li>Reine Datenverarbeitung/Validierung → sync</li>
<li>Wenn async aufgerufen wird → aufrufende Funktion ebenfalls async</li>
</ul>
<h2 id="guide-getting-started-development-tests">Tests<a class="headerlink" href="#guide-getting-started-development-tests" title="Permanent link">&para;</a></h2>
<p><div class="highlight"><pre><span></span><code>pytest<span class="w"> </span>-q
</code></pre></div>
- Async‑Tests mit <code>@pytest.mark.asyncio</code>
- Coverage optional mit <code>pytest-cov</code></p>
<h2 id="guide-getting-started-development-git">Git<a class="headerlink" href="#guide-getting-started-development-git" title="Permanent link">&para;</a></h2>
<ul>
<li>Commit‑Konventionen: feat/fix/docs/refactor/test</li>
<li>Branches: <code>main</code> → <code>develop</code> → <code>feature/*</code></li>
</ul>
<h2 id="guide-getting-started-development-beitrage-support-kurz">Beiträge &amp; Support (Kurz)<a class="headerlink" href="#guide-getting-started-development-beitrage-support-kurz" title="Permanent link">&para;</a></h2>
<ul>
<li>Issues/PRs über GitHub (Bugs, Features, Docs)</li>
<li>Support per E‑Mail (siehe Support‑Seite)</li>
</ul></section></section>
                    <section class='print-page md-section' id='section-3-2' heading-number='3.2'>
                        <h1>UI<a class='headerlink' href='#section-3-2' title='Permanent link'></a>
                        </h1>
                    <section class="print-page" id="guide-ui-dashboard" heading-number="3.2.1"><h1 id="guide-ui-dashboard-web-interface">Web-Interface<a class="headerlink" href="#guide-ui-dashboard-web-interface" title="Permanent link">&para;</a></h1>
<h2 id="guide-ui-dashboard-bereiche">Bereiche<a class="headerlink" href="#guide-ui-dashboard-bereiche" title="Permanent link">&para;</a></h2>
<ul>
<li>Dashboard: Systemstatus, aktuelle Jobs, Metriken</li>
<li>Logs: Streaming, Filter, Export</li>
<li>Config: Parameter editieren, Validierung</li>
<li>Tests: Suiten, Einzeltests, Coverage</li>
<li>API: Swagger UI unter <code>/api/doc</code></li>
</ul>
<h2 id="guide-ui-dashboard-screenshots">Screenshots<a class="headerlink" href="#guide-ui-dashboard-screenshots" title="Permanent link">&para;</a></h2>
<ul>
<li><code>docs/screens/dashboard.jpg</code></li>
<li><code>docs/screens/logs.jpg</code></li>
<li><code>docs/screens/config.jpg</code></li>
<li><code>docs/screens/test.jpg</code></li>
</ul></section></section>
                    <section class='print-page md-section' id='section-3-3' heading-number='3.3'>
                        <h1>How‑Tos<a class='headerlink' href='#section-3-3' title='Permanent link'></a>
                        </h1>
                    <section class="print-page" id="guide-how-tos-session-archive" heading-number="3.3.1"><h1 id="guide-how-tos-session-archive-howto-sessionarchive-herunterladen">How‑To: Session‑Archive herunterladen<a class="headerlink" href="#guide-how-tos-session-archive-howto-sessionarchive-herunterladen" title="Permanent link">&para;</a></h1>
<p>1) Job anlegen (<code>POST /api/event-job/jobs</code>) oder Batch (<code>POST /api/event-job/batches</code>).
2) Verarbeiten lassen; <code>job_id</code> merken.
3) ZIP herunterladen: <code>GET /api/event-job/jobs/{job_id}/download-archive</code>.</p>
<p>Beispiel (curl):
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-L<span class="w"> </span>-o<span class="w"> </span>result.zip<span class="w"> </span>http://localhost:5000/api/event-job/jobs/&lt;JOB_ID&gt;/download-archive
</code></pre></div></p></section></section></section>
                    <section class='print-page md-section' id='section-4' heading-number='4'>
                        <h1>Explanations<a class='headerlink' href='#section-4' title='Permanent link'></a>
                        </h1>
                    
                    <section class='print-page md-section' id='section-4-1' heading-number='4.1'>
                        <h1>Architektur<a class='headerlink' href='#section-4-1' title='Permanent link'></a>
                        </h1>
                    <section class="print-page" id="explanations-architecture-overview" heading-number="4.1.1"><h1 id="explanations-architecture-overview-systemarchitektur-uberblick">Systemarchitektur (Überblick)<a class="headerlink" href="#explanations-architecture-overview-systemarchitektur-uberblick" title="Permanent link">&para;</a></h1>
<ul>
<li>API Layer (Flask-RESTX): Namespaces unter <code>/api/*</code>, Swagger unter <code>/api/doc</code></li>
<li>Processor Layer: Audio, Video, YouTube, Transformer, Metadata</li>
<li>Storage: Cache/Temp, Logs, Konfiguration, Templates</li>
<li>Externe Dienste: OpenAI (Whisper/GPT), YouTube API, FFmpeg</li>
</ul>
<h2 id="explanations-architecture-overview-prozessorbeziehungen-vereinfacht">Prozessorbeziehungen (vereinfacht)<a class="headerlink" href="#explanations-architecture-overview-prozessorbeziehungen-vereinfacht" title="Permanent link">&para;</a></h2>
<ul>
<li>YouTube → Audio → Transformer</li>
<li>Audio → Metadata → Transformer</li>
</ul>
<pre class="mermaid"><code>graph TD
  A[BaseProcessor] --&gt; B[CacheableProcessor]
  B --&gt; C[AudioProcessor]
  B --&gt; D[PDFProcessor]
  B --&gt; E[ImageOCRProcessor]
  B --&gt; F[TransformerProcessor]
  A --&gt; G[MetadataProcessor]
  B --&gt; H[SessionProcessor]
  B --&gt; I[VideoProcessor]
  B --&gt; J[TrackProcessor]
  B --&gt; K[StoryProcessor]
  B --&gt; L[YoutubeProcessor]</code></pre>
<h2 id="explanations-architecture-overview-konfiguration">Konfiguration<a class="headerlink" href="#explanations-architecture-overview-konfiguration" title="Permanent link">&para;</a></h2>
<ul>
<li><code>config/config.yaml</code></li>
<li><code>.env</code></li>
</ul></section><section class="print-page" id="explanations-architecture-details" heading-number="4.1.2"><h1 id="explanations-architecture-details-architektur-details">Architektur (Details)<a class="headerlink" href="#explanations-architecture-details-architektur-details" title="Permanent link">&para;</a></h1>
<h2 id="explanations-architecture-details-komponenten-und-codepfade">Komponenten und Codepfade<a class="headerlink" href="#explanations-architecture-details-komponenten-und-codepfade" title="Permanent link">&para;</a></h2>
<ul>
<li>API Routing: <code>src/api/routes/__init__.py</code> (Registrierung aller Namespaces unter <code>/api/*</code>)</li>
<li>Prozessoren: <code>src/processors/*</code> (Audio, Video, PDF, Image‑OCR, Transformer, Metadata, Session)</li>
<li>Modelle/Typen: <code>src/core/models/*</code></li>
<li>MongoDB/Jobs: <code>src/core/mongodb/*</code></li>
</ul>
<h2 id="explanations-architecture-details-flows-vereinfacht">Flows (vereinfacht)<a class="headerlink" href="#explanations-architecture-details-flows-vereinfacht" title="Permanent link">&para;</a></h2>
<ul>
<li>Video: URL/Upload → <code>VideoProcessor</code> → Audio → <code>TransformerProcessor</code> → Ergebnis</li>
<li>PDF/Image‑OCR: Datei/URL → (Native/Tesseract/LLM) → Markdown/Text → optional Transformer</li>
<li>Async: Client → <code>/api/event-job/*</code> → Worker → Ergebnisse (Markdown/ZIP) in MongoDB</li>
</ul>
<h2 id="explanations-architecture-details-prinzipien">Prinzipien<a class="headerlink" href="#explanations-architecture-details-prinzipien" title="Permanent link">&para;</a></h2>
<ul>
<li>Standardisierte Responses (<code>status/request/process/data/error</code>)</li>
<li>LLM‑Tracking in <code>process.llm_info</code></li>
<li>Caching (Datei/MongoDB) mit deterministischen Keys</li>
</ul>
<p>Weitere Übersichten: siehe <code>explanations/architecture/overview.md</code>.</p></section></section>
                    <section class='print-page md-section' id='section-4-2' heading-number='4.2'>
                        <h1>Async Events<a class='headerlink' href='#section-4-2' title='Permanent link'></a>
                        </h1>
                    <section class="print-page" id="explanations-async-events-overview" heading-number="4.2.1"><h1 id="explanations-async-events-overview-async-events-uberblick">Async Events (Überblick)<a class="headerlink" href="#explanations-async-events-overview-async-events-uberblick" title="Permanent link">&para;</a></h1>
<p>Ziel: Sessions in Jobs/Batches asynchron verarbeiten, Ergebnisse persistieren (MongoDB), optional Webhooks.</p>
<h2 id="explanations-async-events-overview-bausteine">Bausteine<a class="headerlink" href="#explanations-async-events-overview-bausteine" title="Permanent link">&para;</a></h2>
<ul>
<li>API: <code>/api/event-job/*</code> (Jobs, Batches, Files)</li>
<li>Storage: MongoDB (Jobs/Batches/Results)</li>
<li>Worker: verarbeitet Queue/Jobs (siehe Repository/Worker‑Manager)</li>
</ul>
<h2 id="explanations-async-events-overview-kernablauf">Kernablauf<a class="headerlink" href="#explanations-async-events-overview-kernablauf" title="Permanent link">&para;</a></h2>
<p>1) Client erstellt Job oder Batch (<code>POST /api/event-job/jobs|batches</code>)
2) Worker nimmt Jobs auf, verarbeitet (Scrape → Audio/Video/PDF → Transformer)
3) Ergebnisse landen im Job (<code>results</code>, Markdown/Assets/Archive)
4) Optionaler Webhook erhält Callback</p>
<pre class="mermaid"><code>flowchart LR
  A[Client] --&gt; B[/POST /api/event-job/submit/]
  B --&gt; C[Queue/DB]
  C --&gt;|Worker| D[EventProcessor]
  D --&gt; E[(Cache/Mongo)]
  D --&gt; F[Prozessoren: Video/Audio/PDF/...]
  F --&gt; D
  D --&gt; G[/GET /api/event-job/status/{id}/]
  G --&gt; H[Result JSON/ZIP]</code></pre>
<h2 id="explanations-async-events-overview-endpunkte-auszug">Endpunkte (Auszug)<a class="headerlink" href="#explanations-async-events-overview-endpunkte-auszug" title="Permanent link">&para;</a></h2>
<ul>
<li>Jobs: <code>POST/GET /api/event-job/jobs</code>, <code>GET/DELETE /api/event-job/jobs/{job_id}</code></li>
<li>Batch: <code>POST/GET /api/event-job/batches</code>, <code>GET/DELETE /api/event-job/batches/{batch_id}</code></li>
<li>Steuerung: <code>POST /api/event-job/batches/{id}/archive</code>, <code>POST /api/event-job/batches/{id}/toggle-active</code>, <code>POST /api/event-job/{job_id}/restart</code></li>
<li>Download: <code>GET /api/event-job/jobs/{job_id}/download-archive</code></li>
</ul>
<h2 id="explanations-async-events-overview-beispiel-batch-anlegen">Beispiel: Batch anlegen<a class="headerlink" href="#explanations-async-events-overview-beispiel-batch-anlegen" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>http://localhost:5000/api/event-job/batches<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s1">&#39;Content-Type: application/json&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<span class="s1">    &quot;batch_name&quot;: &quot;FOSDEM ecosocial&quot;,</span>
<span class="s1">    &quot;jobs&quot;: [</span>
<span class="s1">      {&quot;parameters&quot;: {&quot;event&quot;:&quot;FOSDEM&quot;,&quot;session&quot;:&quot;T1&quot;,&quot;url&quot;:&quot;https://...&quot;,&quot;filename&quot;:&quot;t1.md&quot;,&quot;track&quot;:&quot;ecosocial&quot;}},</span>
<span class="s1">      {&quot;parameters&quot;: {&quot;event&quot;:&quot;FOSDEM&quot;,&quot;session&quot;:&quot;T2&quot;,&quot;url&quot;:&quot;https://...&quot;,&quot;filename&quot;:&quot;t2.md&quot;,&quot;track&quot;:&quot;ecosocial&quot;}}</span>
<span class="s1">    ],</span>
<span class="s1">    &quot;webhook&quot;: {&quot;url&quot;: &quot;https://example.org/hook&quot;}</span>
<span class="s1">  }&#39;</span>
</code></pre></div>
<h2 id="explanations-async-events-overview-statusverwaltung">Status/Verwaltung<a class="headerlink" href="#explanations-async-events-overview-statusverwaltung" title="Permanent link">&para;</a></h2>
<ul>
<li>Job: <code>status</code>, <code>progress</code>, <code>results</code>, <code>error</code>, <code>batch_id</code>, <code>user_id</code></li>
<li>Batch: <code>status</code>, <code>completed_jobs/failed_jobs</code>, <code>isActive</code>, <code>archived</code></li>
<li>Zugriff: optional via <code>X-User-ID</code> (Lesen/Schreiben)</li>
</ul>
<h2 id="explanations-async-events-overview-hinweise">Hinweise<a class="headerlink" href="#explanations-async-events-overview-hinweise" title="Permanent link">&para;</a></h2>
<ul>
<li><code>use_cache</code> steuert Wiederverwendung; Neustart per <code>POST /api/event-job/{job_id}/restart</code></li>
<li>Archivieren ändert den Lebenszyklus, löscht keine Ergebnisse</li>
</ul></section><section class="print-page" id="explanations-async-events-generic-worker" heading-number="4.2.2"><h1 id="explanations-async-events-generic-worker-explanations-async-events-generic-worker">Generischer Worker</h1><h3 id="generischer-async-worker-ubersicht">Generischer Async-Worker (Übersicht)<a class="headerlink" href="#explanations-async-events-generic-worker-generischer-async-worker-ubersicht" title="Permanent link">&para;</a></h3>
<p>Dieser Worker verarbeitet unterschiedliche Job-Typen (z. B. <code>session</code>, <code>pdf</code>) asynchron, nutzt MongoDB als Queue (<code>event_jobs</code>, <code>event_batches</code>) und liefert konsistente Status‑, Progress‑ und Fehlerdaten.</p>
<ul>
<li><strong>Ziel</strong>: Ein System für alle Prozessoren (PDF, Audio, Video, OCR, Transformer, …)</li>
<li><strong>Mechanik</strong>: Polling, Threads für Nebenläufigkeit, <code>asyncio</code> im Worker, Batch‑Tracking</li>
<li><strong>Erweiterbarkeit</strong>: <code>job_type → handler</code> via Registry</li>
</ul>
<h4 id="explanations-async-events-generic-worker-architektur-auf-einen-blick">Architektur auf einen Blick<a class="headerlink" href="#explanations-async-events-generic-worker-architektur-auf-einen-blick" title="Permanent link">&para;</a></h4>
<ul>
<li>Ein <code>GenericWorkerManager</code> pollt <code>pending</code> Jobs und startet Worker‑Threads (bis <code>max_concurrent_workers</code>).</li>
<li>Pro Job sucht er den passenden Handler anhand <code>job_type</code> und führt ihn aus (Statuswechsel: <code>pending → processing → completed/failed</code>).</li>
<li>Ergebnisse und Logs werden im <code>SessionJobRepository</code> gepflegt, Batches aggregieren Fortschritt.</li>
</ul>
<h4 id="explanations-async-events-generic-worker-registrydispatch-beispiel">Registry/Dispatch (Beispiel)<a class="headerlink" href="#explanations-async-events-generic-worker-registrydispatch-beispiel" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1"># registry.py</span>
<span class="n">REGISTRY</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Callable</span><span class="p">[[</span><span class="n">Job</span><span class="p">,</span> <span class="n">SessionJobRepository</span><span class="p">,</span> <span class="n">ResourceCalculator</span><span class="p">],</span> <span class="n">Awaitable</span><span class="p">[</span><span class="kc">None</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">{}</span>

<span class="k">def</span><span class="w"> </span><span class="nf">register</span><span class="p">(</span><span class="n">job_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">handler</span><span class="p">:</span> <span class="n">Callable</span><span class="p">[</span><span class="o">...</span><span class="p">,</span> <span class="n">Awaitable</span><span class="p">[</span><span class="kc">None</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">REGISTRY</span><span class="p">[</span><span class="n">job_type</span><span class="p">]</span> <span class="o">=</span> <span class="n">handler</span>

<span class="k">def</span><span class="w"> </span><span class="nf">get_handler</span><span class="p">(</span><span class="n">job_type</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">REGISTRY</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">job_type</span><span class="p">)</span>

<span class="c1"># im Worker-Thread</span>
<span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">_process_job</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">job</span><span class="p">:</span> <span class="n">Job</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
    <span class="n">handler</span> <span class="o">=</span> <span class="n">registry</span><span class="o">.</span><span class="n">get_handler</span><span class="p">(</span><span class="n">job</span><span class="o">.</span><span class="n">job_type</span> <span class="ow">or</span> <span class="s2">&quot;session&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">handler</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">job_repo</span><span class="o">.</span><span class="n">update_job_status</span><span class="p">(</span>
            <span class="n">job_id</span><span class="o">=</span><span class="n">job</span><span class="o">.</span><span class="n">job_id</span><span class="p">,</span>
            <span class="n">status</span><span class="o">=</span><span class="n">JobStatus</span><span class="o">.</span><span class="n">FAILED</span><span class="p">,</span>
            <span class="n">error</span><span class="o">=</span><span class="n">JobError</span><span class="p">(</span><span class="n">code</span><span class="o">=</span><span class="s2">&quot;UNKNOWN_JOB_TYPE&quot;</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">job</span><span class="o">.</span><span class="n">job_type</span><span class="p">))</span>
        <span class="p">)</span>
        <span class="k">return</span>
    <span class="k">await</span> <span class="n">handler</span><span class="p">(</span><span class="n">job</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">job_repo</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">resource_calculator</span><span class="p">)</span>
</code></pre></div>
<h4 id="explanations-async-events-generic-worker-pdf-als-jobtyp">PDF als Job‑Typ<a class="headerlink" href="#explanations-async-events-generic-worker-pdf-als-jobtyp" title="Permanent link">&para;</a></h4>
<ul>
<li>Parameter (z. B. <code>file_path</code>, <code>extraction_method</code>, <code>include_images</code>, <code>template</code>, <code>context</code>) werden im Job abgelegt und vom PDF‑Handler an <code>PDFProcessor.process(...)</code> übergeben.</li>
</ul>
<h4 id="explanations-async-events-generic-worker-konfiguration">Konfiguration<a class="headerlink" href="#explanations-async-events-generic-worker-konfiguration" title="Permanent link">&para;</a></h4>
<ul>
<li><code>session_worker.*</code> wird zu <code>generic_worker.*</code> erweitert (optional pro Typ: <code>max_concurrent_per_type</code>).</li>
<li><code>MONGODB_URI</code> muss gesetzt sein.</li>
</ul>
<h4 id="explanations-async-events-generic-worker-weiterfuhrend">Weiterführend<a class="headerlink" href="#explanations-async-events-generic-worker-weiterfuhrend" title="Permanent link">&para;</a></h4>
<ul>
<li>Detaillierte Analyse und Migrationsplan: siehe <code>docs/_analysis/generic_worker.md</code>.</li>
</ul>
<h3 id="explanations-async-events-generic-worker-anwendungsbeispiele-api">Anwendungsbeispiele (API)<a class="headerlink" href="#explanations-async-events-generic-worker-anwendungsbeispiele-api" title="Permanent link">&para;</a></h3>
<ul>
<li>
<p>Aktivierung: In <code>config/config.yaml</code> <code>generic_worker.active: true</code> setzen. Der Worker startet dann mit der App.</p>
</li>
<li>
<p>PDF einreihen (Einzeljob):</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/api/jobs</span>
<span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;job_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;pdf&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://example.com/document.pdf&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;extraction_method&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;native&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;use_cache&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;extra&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;include_images&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<ul>
<li>Session einreihen (Einzeljob):</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/api/jobs</span>
<span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;job_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;session&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;event&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;FOSDEM 2025&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;session&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Forked Communities: Project Re-licensing and Community Impact&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://fosdem.org/2025/schedule/event/...&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;filename&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Forked-Communities-Project-Relicensing-and-Community-Impact.md&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;track&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Main-Track-Janson-7&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;day&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Saturday&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;starttime&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;17:00&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;endtime&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;17:50&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;speakers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;Dawn M Foster&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Brian Proffitt&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Stephen  Walli&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;Ben Ford&quot;</span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;attachments_url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://fosdem.org/.../slides/.../FOSDEM_Fo_HyZR9km.pdf&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;source_language&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;en&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;target_language&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;de&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;use_cache&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;extra&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;create_archive&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;template&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Session&quot;</span><span class="w"> </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<ul>
<li>Batch einreihen:</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="err">POST</span><span class="w"> </span><span class="err">/api/jobs/ba</span><span class="kc">t</span><span class="err">ch</span>
<span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;batch_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;import_batch&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;jobs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;job_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;pdf&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://example.com/a.pdf&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;extraction_method&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;native&quot;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">    </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;job_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;session&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;event&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;FOSDEM 2025&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;session&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;...&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://fosdem.org/...&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;target_language&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;de&quot;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<span class="w">  </span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
<ul>
<li>Status/Ergebnis abrufen:</li>
<li><code>GET /api/jobs/{job_id}</code> (liefert den Job, inkl. <code>status</code>, <code>progress</code>, <code>results</code>)</li>
<li><code>GET /api/batch/{batch_id}</code></li>
<li>
<p>Archiv‑Download (wenn vorhanden): <code>GET /api/jobs/{job_id}/download-archive</code></p>
</li>
<li>
<p>Hinweise zu Ergebnissen:</p>
</li>
<li>PDF: <code>results.page_texts</code> enthält API‑URLs (<code>/api/pdf/text-content/&lt;path&gt;</code>) auf die extrahierten Seiten‑Texte; <code>results.asset_dir</code> enthält das Arbeitsverzeichnis.</li>
<li>Session: <code>results.markdown_file</code> verweist auf erzeugte Markdown‑Datei im <code>sessions/</code>‑Baum; optionales ZIP im Archiv‑Download.</li>
</ul></section><section class="print-page" id="explanations-async-events-secretary-job-worker-concept" heading-number="4.2.3"><h1 id="explanations-async-events-secretary-job-worker-concept-explanations-async-events-secretary-job-worker-concept">Secretary Job Worker – Konzept</h1><h3 id="secretary-job-worker-konzept-inputoutput-flows-speicherung">Secretary Job Worker – Konzept (Input/Output, Flows, Speicherung)<a class="headerlink" href="#explanations-async-events-secretary-job-worker-concept-secretary-job-worker-konzept-inputoutput-flows-speicherung" title="Permanent link">&para;</a></h3>
<p>Ziel: Generischer, nebenläufiger Worker für unterschiedliche <code>job_type</code>s (z. B. <code>pdf</code>, <code>session</code>, <code>audio</code>, <code>imageocr</code>, <code>transformer</code>), mit einheitlichem Job‑Lebenszyklus, konsistenter Speicherung (MongoDB), optionalen Webhooks und klaren I/O‑Schemata.</p>
<h4 id="explanations-async-events-secretary-job-worker-concept-collections-und-namenskonvention">Collections und Namenskonvention<a class="headerlink" href="#explanations-async-events-secretary-job-worker-concept-collections-und-namenskonvention" title="Permanent link">&para;</a></h4>
<ul>
<li>Collections (neu): <code>jobs</code>, <code>batches</code></li>
<li>Job‑Felder (Kern): <code>job_id</code>, <code>job_type</code>, <code>status</code>, <code>parameters</code>, <code>progress</code>, <code>results</code>, <code>error</code>, <code>created_at</code>, <code>updated_at</code>, <code>processing_started_at</code>, <code>completed_at</code>, <code>batch_id</code>, <code>user_id</code>, <code>access_control</code>, <code>logs</code></li>
<li>Batch‑Felder (Kern): <code>batch_id</code>, <code>status</code>, <code>total_jobs</code>, <code>completed_jobs</code>, <code>failed_jobs</code>, <code>pending_jobs</code>, <code>processing_jobs</code>, Timestamps</li>
</ul>
<h4 id="explanations-async-events-secretary-job-worker-concept-lebenszyklus-und-progress-standard">Lebenszyklus und Progress (Standard)<a class="headerlink" href="#explanations-async-events-secretary-job-worker-concept-lebenszyklus-und-progress-standard" title="Permanent link">&para;</a></h4>
<ul>
<li>Status: <code>pending → processing → completed/failed</code></li>
<li>Progress‑Schritte (Beispiel <code>pdf</code>):</li>
<li><code>initializing</code> (0 %)</li>
<li><code>downloading_or_opening</code> (5 %)</li>
<li><code>converting_pptx_to_pdf</code> (optional)</li>
<li><code>processing_pages:&lt;i&gt;/&lt;n&gt;</code> (10–90 %)</li>
<li><code>postprocessing</code> (90–98 %)</li>
<li><code>completed</code> (100 %)</li>
</ul>
<h4 id="explanations-async-events-secretary-job-worker-concept-enqueue-beispiel-fur-pdftransformation-jobdokument">Enqueue: Beispiel für PDF‑Transformation (Job‑Dokument)<a class="headerlink" href="#explanations-async-events-secretary-job-worker-concept-enqueue-beispiel-fur-pdftransformation-jobdokument" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;job_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;pdf&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;file_path&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;C:/data/docs/report.pdf&quot;</span><span class="p">,</span><span class="w">  </span>
<span class="w">    </span><span class="nt">&quot;url&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">                                 </span>
<span class="w">    </span><span class="nt">&quot;extraction_method&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;llm_and_native&quot;</span><span class="p">,</span><span class="w">     </span>
<span class="w">    </span><span class="nt">&quot;include_images&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">                      </span>
<span class="w">    </span><span class="nt">&quot;template&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Session&quot;</span><span class="p">,</span><span class="w">                     </span>
<span class="w">    </span><span class="nt">&quot;context&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;document_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;report&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;language&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;de&quot;</span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;use_cache&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;force_overwrite&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;webhook&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://example.local/webhook/jobs&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;headers&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;Authorization&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Bearer &lt;token&gt;&quot;</span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;include_markdown&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;include_metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;user_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;u-123&quot;</span>
<span class="p">}</span>
</code></pre></div>
<p>Hinweise:
- Lokaldatei via <code>file_path</code> oder Remote‑Download via <code>url</code> (eines von beiden ausreichend).
- <code>extraction_method</code>: <code>native | ocr | both | preview | llm | llm_and_native | llm_and_ocr | preview_and_native</code>.
- <code>template</code> und <code>context</code> optional für nachgelagerte Transformationen.</p>
<h4 id="explanations-async-events-secretary-job-worker-concept-batchenqueue-beispiel">Batch‑Enqueue (Beispiel)<a class="headerlink" href="#explanations-async-events-secretary-job-worker-concept-batchenqueue-beispiel" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;batch&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;batch_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;pdf_import_2025_03&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;jobs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;job_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;pdf&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://example/doc1.pdf&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;extraction_method&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;native&quot;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">},</span>
<span class="w">      </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;job_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;pdf&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">&quot;file_path&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;C:/docs/scan.pdf&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;extraction_method&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;llm_and_ocr&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;include_images&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="p">]</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="explanations-async-events-secretary-job-worker-concept-responsemuster-api">Response‑Muster (API)<a class="headerlink" href="#explanations-async-events-secretary-job-worker-concept-responsemuster-api" title="Permanent link">&para;</a></h4>
<ul>
<li>Enqueue (synchron): Sofortige Bestätigung mit IDs.</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;success&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;request&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;processor&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;job-enqueue&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;timestamp&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;...&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;job_count&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">}},</span>
<span class="w">  </span><span class="nt">&quot;process&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;...&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;main_processor&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SecretaryJobWorker&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;llm_info&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;requests&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]}},</span>
<span class="w">  </span><span class="nt">&quot;data&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;job_ids&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;job-...&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;job-...&quot;</span><span class="p">],</span><span class="w"> </span><span class="nt">&quot;batch_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;batch-...&quot;</span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<ul>
<li>Polling (Status/Ergebnis): <code>GET /api/jobs/{job_id}</code> liefert Job‑Dokument (inkl. <code>results</code>, <code>error</code>, <code>progress</code>).</li>
</ul>
<h4 id="explanations-async-events-secretary-job-worker-concept-webhookcallback-beispiel-completed">Webhook‑Callback (Beispiel <code>completed</code>)<a class="headerlink" href="#explanations-async-events-secretary-job-worker-concept-webhookcallback-beispiel-completed" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;job_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;job-...&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;job_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;pdf&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;completed&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;progress&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;step&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;completed&quot;</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;percent&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Verarbeitung abgeschlossen&quot;</span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;results&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;markdown_file&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;/api/pdf/text-content/cache/pdf/&lt;hash&gt;/.../page_001.txt&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;markdown_content&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;assets&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;/cache/pdf/&lt;hash&gt;/image_001.jpg&quot;</span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;web_text&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;video_transcript&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;attachments_text&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;attachments_url&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;archive_data&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&lt;base64-zip&gt;&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;archive_filename&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;report_images_20250306_125636.zip&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;structured_data&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;target_dir&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;C:/.../cache/pdf/&lt;hash&gt;/llm_and_native&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;page_texts&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;/api/pdf/text-content/cache/pdf/&lt;hash&gt;/.../page_001.txt&quot;</span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;asset_dir&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;C:/.../cache/pdf/&lt;hash&gt;/llm_and_native&quot;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Hinweis: Pfade können als URLs aufbereitet werden (z. B. <code>/api/pdf/text-content/...</code>).</p>
<h4 id="explanations-async-events-secretary-job-worker-concept-dateiablage-konzeptionell">Dateiablage (konzeptionell)<a class="headerlink" href="#explanations-async-events-secretary-job-worker-concept-dateiablage-konzeptionell" title="Permanent link">&para;</a></h4>
<ul>
<li>Arbeitsverzeichnis (temporär): <code>cache/pdf/&lt;file_key&gt;/&lt;extraction_subdir&gt;</code></li>
<li><code>image_###.jpg</code> (Hauptbilder)</li>
<li><code>preview_###.jpg</code> (Vorschaubilder, optional)</li>
<li><code>page_###.txt</code> (extrahierter Text/Markdown pro Seite)</li>
<li><code>previews.zip</code> (optional)</li>
<li>Persistente Verweise</li>
<li>URLs in <code>results.page_texts</code> zeigen auf API‑Routen, die Inhalte aus dem Dateisystem bereitstellen.</li>
</ul>
<h4 id="explanations-async-events-secretary-job-worker-concept-fehlermuster">Fehler‑Muster<a class="headerlink" href="#explanations-async-events-secretary-job-worker-concept-fehlermuster" title="Permanent link">&para;</a></h4>
<ul>
<li><code>status: failed</code> und <code>error: { code, message, details }</code></li>
<li>Typische Fehlercodes <code>PROCESSING_TIMEOUT</code>, <code>DOWNLOAD_FAILED</code>, <code>UNSUPPORTED_FILE</code>, <code>UNKNOWN_JOB_TYPE</code>.</li>
</ul>
<h4 id="explanations-async-events-secretary-job-worker-concept-handlerschnittstelle-registry">Handler‑Schnittstelle (Registry)<a class="headerlink" href="#explanations-async-events-secretary-job-worker-concept-handlerschnittstelle-registry" title="Permanent link">&para;</a></h4>
<ul>
<li><code>handler(job, repo, resource_calculator) -&gt; Awaitable[None]</code></li>
<li>Verantwortlich für: Parameter lesen/validieren, Progress updaten, Processor aufrufen, <code>results</code> speichern, Logs schreiben, Fehler abfangen.</li>
</ul>
<h4 id="explanations-async-events-secretary-job-worker-concept-sessionalt-kompatibilitat">Session‑(Alt) Kompatibilität<a class="headerlink" href="#explanations-async-events-secretary-job-worker-concept-sessionalt-kompatibilitat" title="Permanent link">&para;</a></h4>
<ul>
<li>Alte <code>event_jobs</code>/<code>event_batches</code> unverändert. Für Migration kann ein <code>session</code>‑Handler definiert werden, der die bisherige Logik spiegelt, aber in <code>jobs</code>/<code>batches</code> läuft.</li>
</ul>
<h4 id="explanations-async-events-secretary-job-worker-concept-abruf-durch-aufrufende-anwendungen-mongo-dateisystem">Abruf durch aufrufende Anwendungen (Mongo + Dateisystem)<a class="headerlink" href="#explanations-async-events-secretary-job-worker-concept-abruf-durch-aufrufende-anwendungen-mongo-dateisystem" title="Permanent link">&para;</a></h4>
<ul>
<li>MongoDB/Status/Ergebnisse (heute vorhanden, Alt‑System):</li>
<li><code>GET /api/event-job/jobs</code> (Filter nach <code>status</code>, <code>batch_id</code>, <code>user_id</code>)</li>
<li><code>GET /api/event-job/jobs/{job_id}</code></li>
<li><code>GET /api/event-job/batches</code></li>
<li><code>GET /api/event-job/batches/{batch_id}</code></li>
<li>
<p>ZIP‑Archiv: <code>GET /api/event-job/jobs/{job_id}/download-archive</code></p>
</li>
<li>
<p>Dateisystem‑Inhalte (heute vorhanden):</p>
</li>
<li>PDF‑Seiteninhalte (Textdateien aus Cache): <code>GET /api/pdf/text-content/&lt;path:file_path&gt;</code><ul>
<li>Sicherheit: Zugriff nur innerhalb <code>cache/</code>, nur <code>.txt</code></li>
</ul>
</li>
<li>
<p>In <code>results</code> liefern Prozessoren URLs/Verweise: <code>results.page_texts</code> (API‑URLs), <code>results.asset_dir</code>, <code>results.target_dir</code>, <code>results.images_archive_*</code>.</p>
</li>
<li>
<p>Für den neuen Secretary Job Worker (Zielbild):</p>
</li>
<li>Neue Endpoints analog zu oben, aber auf <code>jobs</code>/<code>batches</code> (neue Collections) gemappt:<ul>
<li><code>POST /api/jobs</code> (einzelner Job), <code>POST /api/batches</code> (mehrere Jobs)</li>
<li><code>GET /api/jobs/{job_id}</code> (Status/Results), <code>GET /api/batches/{batch_id}</code> (Aggregat)</li>
<li><code>GET /api/jobs/{job_id}/download-archive</code> (ZIP aus <code>results.archive_data</code>)</li>
</ul>
</li>
<li>File‑Serving weiter über spezialisierte Endpoints (z. B. <code>GET /api/pdf/text-content/...</code>) oder optional generisch <code>GET /api/files/text/&lt;path&gt;</code> mit Whitelist (<code>cache/</code>) und Typkontrolle.</li>
<li>Empfehlung: Results konsequent mit API‑URLs ausliefern (nicht mit Rohpfaden), damit Clients einheitlich abrufen können.</li>
</ul>
<h4 id="explanations-async-events-secretary-job-worker-concept-api-endpunkte-secretary-job-worker">API-Endpunkte (Secretary Job Worker)<a class="headerlink" href="#explanations-async-events-secretary-job-worker-concept-api-endpunkte-secretary-job-worker" title="Permanent link">&para;</a></h4>
<ul>
<li>Enqueue einzelner Job:</li>
<li><code>POST /api/jobs</code> (Body siehe Beispiele)</li>
<li>Enqueue Batch:</li>
<li><code>POST /api/jobs/batch</code></li>
<li>Status/Ergebnisse:</li>
<li><code>GET /api/jobs/{job_id}</code></li>
<li><code>GET /api/batch/{batch_id}</code></li>
<li>Archiv‑Download:</li>
<li><code>GET /api/jobs/{job_id}/download-archive</code></li>
</ul>
<p>Beispielkörper siehe Überblicksseite <code>generic-worker.md</code> (PDF &amp; Session).</p></section><section class="print-page" id="explanations-async-events-how-to-n8n" heading-number="4.2.4"><h1 id="explanations-async-events-how-to-n8n-howto-async-batches-mit-n8n">How‑To: Async Batches mit n8n<a class="headerlink" href="#explanations-async-events-how-to-n8n-howto-async-batches-mit-n8n" title="Permanent link">&para;</a></h1>
<p>1) HTTP Node: <code>POST /api/event-job/batches</code>
2) Webhook (optional): URL in <code>webhook.url</code> setzen
3) Polling/Status: <code>GET /api/event-job/batches/{id}</code> oder <code>GET /api/event-job/jobs?batch_id=...</code></p>
<p>Beispiel‑Payload:
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;batch_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;FOSDEM ecosocial&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;jobs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">    </span><span class="p">{</span><span class="nt">&quot;parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;event&quot;</span><span class="p">:</span><span class="s2">&quot;FOSDEM&quot;</span><span class="p">,</span><span class="nt">&quot;session&quot;</span><span class="p">:</span><span class="s2">&quot;T1&quot;</span><span class="p">,</span><span class="nt">&quot;url&quot;</span><span class="p">:</span><span class="s2">&quot;https://...&quot;</span><span class="p">,</span><span class="nt">&quot;filename&quot;</span><span class="p">:</span><span class="s2">&quot;t1.md&quot;</span><span class="p">,</span><span class="nt">&quot;track&quot;</span><span class="p">:</span><span class="s2">&quot;ecosocial&quot;</span><span class="p">}},</span>
<span class="w">    </span><span class="p">{</span><span class="nt">&quot;parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;event&quot;</span><span class="p">:</span><span class="s2">&quot;FOSDEM&quot;</span><span class="p">,</span><span class="nt">&quot;session&quot;</span><span class="p">:</span><span class="s2">&quot;T2&quot;</span><span class="p">,</span><span class="nt">&quot;url&quot;</span><span class="p">:</span><span class="s2">&quot;https://...&quot;</span><span class="p">,</span><span class="nt">&quot;filename&quot;</span><span class="p">:</span><span class="s2">&quot;t2.md&quot;</span><span class="p">,</span><span class="nt">&quot;track&quot;</span><span class="p">:</span><span class="s2">&quot;ecosocial&quot;</span><span class="p">}}</span>
<span class="w">  </span><span class="p">],</span>
<span class="w">  </span><span class="nt">&quot;webhook&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="nt">&quot;url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://example.org/hook&quot;</span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div></p>
<p>Relevanter Code: <code>src/api/routes/event_job_routes.py</code>.</p></section></section><section class="print-page" id="explanations-caching-overview" heading-number="4.3"><h1 id="explanations-caching-overview-caching-ubersicht">Caching (Übersicht)<a class="headerlink" href="#explanations-caching-overview-caching-ubersicht" title="Permanent link">&para;</a></h1>
<ul>
<li>Zweck: Ergebnisse wiederverwenden, LLM‑Kosten senken, Latenz reduzieren.</li>
<li>Ebenen:</li>
<li>Dateibasiert (Temp/Cache‑Dirs je Prozessor)</li>
<li>MongoDB‑basierte Caches (Jobs/Batches, Transformer‑Zwischenstände)</li>
<li>Schlüsselideen:</li>
<li>deterministische Cache‑Keys (z. B. MD5 über Datei/URL + Parameter)</li>
<li>klare Invalidierungsregeln (force_refresh, use_cache)</li>
<li>Tracing: <code>process.llm_info</code>, <code>process.duration_ms</code></li>
</ul>
<h2 id="explanations-caching-overview-dateibasierter-cache-prozessoren">Dateibasierter Cache (Prozessoren)<a class="headerlink" href="#explanations-caching-overview-dateibasierter-cache-prozessoren" title="Permanent link">&para;</a></h2>
<ul>
<li>PDF/Image‑OCR: Hash aus Dateiinhalt bzw. URL (<code>file_hash</code>/<code>url_hash</code>) + Extraktionsmethode + Template/Context.</li>
<li>Audio/Video: Upload wird in temp‑Pfad geschrieben, Verarbeitungsergebnis kann anhand Quell‑Fingerprint wiederverwendet werden.</li>
<li>Flags in API:</li>
<li><code>useCache</code>/<code>use_cache</code> (bool)</li>
<li><code>force_refresh</code> (Video)</li>
</ul>
<h2 id="explanations-caching-overview-mongodbcache-jobs-batches">MongoDB‑Cache (Jobs &amp; Batches)<a class="headerlink" href="#explanations-caching-overview-mongodbcache-jobs-batches" title="Permanent link">&para;</a></h2>
<ul>
<li>Komponenten:</li>
<li><code>src/core/mongodb/repository.py</code> (SessionJobRepository)</li>
<li>Endpunkte unter <code>/api/event-job/*</code> für Jobs, Batches, Files</li>
<li>Datenmodell (vereinfacht):</li>
<li>Job: <code>parameters</code>, <code>results</code> (Markdown, Assets, Archive), <code>progress</code>, <code>error</code>, <code>batch_id</code>, <code>user_id</code></li>
<li>Batch: <code>status</code>, <code>isActive</code>, <code>archived</code>, Zähler (completed/failed)</li>
<li>Steuerung:</li>
<li>Archivieren: <code>/api/event-job/batches/{id}/archive</code></li>
<li>Aktiv/Passiv: <code>/api/event-job/batches/{id}/toggle-active</code></li>
<li>Neustart Job: <code>/api/event-job/{job_id}/restart</code></li>
</ul>
<h2 id="explanations-caching-overview-transformercaching-kurz">Transformer‑Caching (Kurz)<a class="headerlink" href="#explanations-caching-overview-transformercaching-kurz" title="Permanent link">&para;</a></h2>
<ul>
<li>Prozessor erzeugt <code>process_info.cache_key</code> aus Inputs (Text/URL, Template, Parameter, Ziel‑Format, Sprache, Context).</li>
<li>Ergebniswiederverwendung, wenn Key identisch.</li>
</ul>
<h2 id="explanations-caching-overview-cachekey-strategie-empfehlung">Cache‑Key Strategie (Empfehlung)<a class="headerlink" href="#explanations-caching-overview-cachekey-strategie-empfehlung" title="Permanent link">&para;</a></h2>
<ul>
<li>Quelle: <code>md5(file)</code> oder <code>md5(url)</code> bzw. <code>md5(text)</code> für kleine Inputs</li>
<li>Parameter: Methode (<code>native|ocr|llm|...</code>), <code>template</code>, <code>target_format</code>, <code>languages</code>, relevante <code>context</code>‑Felder</li>
<li>Key: <code>sha1( source_fingerprint + '|' + method + '|' + template + '|' + param_hash )</code></li>
</ul>
<h2 id="explanations-caching-overview-invalidation">Invalidation<a class="headerlink" href="#explanations-caching-overview-invalidation" title="Permanent link">&para;</a></h2>
<ul>
<li>Automatisch: jeder Input‑/Parameterwechsel → neuer Key</li>
<li>Manuell: <code>force_refresh=true</code> (Video) oder <code>useCache=false</code></li>
<li>Organisatorisch: Batches können archiviert werden; Archivieren löscht Cache nicht, sondern markiert Lebenszyklus.</li>
</ul>
<p>Weiterführende Details wurden ins Archiv verschoben (historische Ausarbeitung).</p></section><section class="print-page" id="explanations-templates-overview" heading-number="4.4"><h1 id="explanations-templates-overview-templates-ubersicht">Templates (Übersicht)<a class="headerlink" href="#explanations-templates-overview-templates-ubersicht" title="Permanent link">&para;</a></h1>
<ul>
<li>Zweck: Unstrukturierte Eingaben (Text/URL) in strukturierte Ausgaben (Markdown/JSON/HTML) überführen.</li>
<li>Ort: <code>templates/</code> im Projekt (Markdown‑basierte Templates)</li>
<li>Hauptendpoint: <code>POST /api/transformer/template</code></li>
<li>Eingaben: <code>text</code> oder <code>url</code>, <code>template</code> oder <code>template_content</code>, optional <code>context</code>, <code>additional_field_descriptions</code>, <code>use_cache</code></li>
<li>Erweiterungen:</li>
<li><code>template_content</code>: Template direkt im Request übergeben</li>
<li><code>additional_field_descriptions</code>: Felder/Validierung präzisieren</li>
<li>Caching via <code>use_cache</code></li>
</ul>
<p>Minimalbeispiel (curl):
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>http://localhost:5000/api/transformer/template<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-F<span class="w"> </span><span class="s2">&quot;text=Beispieltext&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-F<span class="w"> </span><span class="s2">&quot;template=Besprechung&quot;</span>
</code></pre></div></p>
<p>Hinweis: Ausführliche historische Beschreibungen wurden ins Archiv verschoben. Die aktuelle Referenz steht in „Processors → Transformer“ und „Reference → API“.</p></section><section class="print-page" id="explanations-types-overview" heading-number="4.5"><h1 id="explanations-types-overview-typen-dataclasses">Typen &amp; Dataclasses<a class="headerlink" href="#explanations-types-overview-typen-dataclasses" title="Permanent link">&para;</a></h1>
<p>Ziele: einfache, unveränderliche Modelle mit klarer Validierung, schnelle Serialisierung, mypy‑sauber.</p>
<h2 id="explanations-types-overview-grundregeln">Grundregeln<a class="headerlink" href="#explanations-types-overview-grundregeln" title="Permanent link">&para;</a></h2>
<ul>
<li>Native <code>@dataclass</code> statt Pydantic</li>
<li>Strikte Typ‑Annotationen (keine <code>Any</code> in öffentlichen APIs)</li>
<li>Validierung in <code>__post_init__</code></li>
<li>Unveränderlich, wo möglich: <code>frozen=True</code></li>
<li>Performance: <code>slots=True</code> für häufige Modelle</li>
<li>Serialisierung: <code>to_dict()</code>/<code>from_dict()</code> implementieren</li>
<li>Generics: <code>TypeVar</code> für wiederverwendbare Strukturen</li>
<li>Typprüfung: <code>mypy</code> (siehe <code>mypy.ini</code>)</li>
</ul>
<h2 id="explanations-types-overview-minimales-muster">Minimales Muster<a class="headerlink" href="#explanations-types-overview-minimales-muster" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">dataclasses</span><span class="w"> </span><span class="kn">import</span> <span class="n">dataclass</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Any</span>

<span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">slots</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">AudioMetadata</span><span class="p">:</span>
    <span class="n">duration</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">process_dir</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;duration&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">duration</span><span class="p">,</span>
            <span class="s2">&quot;process_dir&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">process_dir</span><span class="p">,</span>
            <span class="s2">&quot;args&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">args</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">from_dict</span><span class="p">(</span><span class="n">data</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="s2">&quot;AudioMetadata&quot;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">AudioMetadata</span><span class="p">(</span>
            <span class="n">duration</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;duration&quot;</span><span class="p">]),</span>
            <span class="n">process_dir</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="s2">&quot;process_dir&quot;</span><span class="p">]),</span>
            <span class="n">args</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;args&quot;</span><span class="p">,</span> <span class="p">{})),</span>
        <span class="p">)</span>
</code></pre></div>
<h2 id="explanations-types-overview-validierung-in-__post_init__">Validierung in <code>__post_init__</code><a class="headerlink" href="#explanations-types-overview-validierung-in-__post_init__" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">dataclasses</span><span class="w"> </span><span class="kn">import</span> <span class="n">dataclass</span>

<span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">slots</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Chapter</span><span class="p">:</span>
    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">start_time</span><span class="p">:</span> <span class="nb">float</span>
    <span class="n">end_time</span><span class="p">:</span> <span class="nb">float</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">__post_init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_time</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">end_time</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Timestamps dürfen nicht negativ sein&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">end_time</span> <span class="o">&lt;</span> <span class="bp">self</span><span class="o">.</span><span class="n">start_time</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;end_time &lt; start_time&quot;</span><span class="p">)</span>
</code></pre></div>
<h2 id="explanations-types-overview-generics-typevar">Generics (TypeVar)<a class="headerlink" href="#explanations-types-overview-generics-typevar" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">dataclasses</span><span class="w"> </span><span class="kn">import</span> <span class="n">dataclass</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Generic</span><span class="p">,</span> <span class="n">TypeVar</span><span class="p">,</span> <span class="n">Dict</span><span class="p">,</span> <span class="n">Any</span>

<span class="n">T</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s2">&quot;T&quot;</span><span class="p">)</span>

<span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">slots</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">CacheEntry</span><span class="p">(</span><span class="n">Generic</span><span class="p">[</span><span class="n">T</span><span class="p">]):</span>
    <span class="n">key</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">value</span><span class="p">:</span> <span class="n">T</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">to_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;key&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">key</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">value</span><span class="p">}</span>  <span class="c1"># value muss selbst serialisierbar sein</span>
</code></pre></div>
<h2 id="explanations-types-overview-mypyhinweise">mypy‑Hinweise<a class="headerlink" href="#explanations-types-overview-mypyhinweise" title="Permanent link">&para;</a></h2>
<ul>
<li>Öffentliche Funktionen/Methoden: vollständige Signaturen</li>
<li>Keine stillen Typ‑Casts; stattdessen genaue Typen</li>
<li>Collections immer parametrisieren: <code>list[str]</code>, <code>dict[str, Any]</code></li>
</ul>
<h2 id="explanations-types-overview-projektbezug">Projektbezug<a class="headerlink" href="#explanations-types-overview-projektbezug" title="Permanent link">&para;</a></h2>
<ul>
<li>Kernmodelle unter <code>src/core/models/*</code> folgen diesem Muster (z. B. <code>audio.py</code>, <code>metadata.py</code>, <code>transformer.py</code>).</li>
<li>Responses implementieren <code>to_dict()</code>; API‑Schicht verwendet diese direkt.</li>
</ul>
<p>Weiterführende historische Dokumente wurden ins Archiv verschoben. Die obigen Regeln sind maßgeblich.</p></section><section class="print-page" id="explanations-metaprocessor-overview" heading-number="4.6"><h1 id="explanations-metaprocessor-overview-metaprocessor-uberblick">Metaprocessor (Überblick)<a class="headerlink" href="#explanations-metaprocessor-overview-metaprocessor-uberblick" title="Permanent link">&para;</a></h1>
<p>Ziel: Höherstufige Orchestrierung mehrerer Prozessoren (Audio, Transformer, Metadata, PDF/Image‑OCR) für komplexe Pipelines.</p>
<h2 id="explanations-metaprocessor-overview-aufgaben-typisch">Aufgaben (typisch)<a class="headerlink" href="#explanations-metaprocessor-overview-aufgaben-typisch" title="Permanent link">&para;</a></h2>
<ul>
<li>Eingaben normalisieren (Datei/URL/Text)</li>
<li>Reihenfolge festlegen (z. B. Download → Transkription → Transformation → Metadaten)</li>
<li>Kontext/Template‑Weitergabe</li>
<li>Zwischenergebnisse cachen (Schlüssel aus Quelle + Parametern)</li>
<li>Einheitliche Response (status/request/process/data/error)</li>
</ul>
<h2 id="explanations-metaprocessor-overview-designprinzipien">Designprinzipien<a class="headerlink" href="#explanations-metaprocessor-overview-designprinzipien" title="Permanent link">&para;</a></h2>
<ul>
<li>Dünne Orchestrierung, Fachlogik bleibt in einzelnen Prozessoren</li>
<li>Dataclasses mit <code>frozen=True</code>, <code>slots=True</code>, klare <code>to_dict()</code></li>
<li>Messpunkte: <code>process.duration_ms</code>, LLM‑Tracking</li>
</ul>
<h2 id="explanations-metaprocessor-overview-baseprocessor-hinweise">BaseProcessor (Hinweise)<a class="headerlink" href="#explanations-metaprocessor-overview-baseprocessor-hinweise" title="Permanent link">&para;</a></h2>
<ul>
<li>Verantwortlich für Prozess‑ID, Temp‑Verzeichnisse, Performance‑Tracking, LLM‑Tracking</li>
<li>Ort: <code>src/processors/base_processor.py</code></li>
<li>Erweiterungen: klare Hooks pro Verarbeitungsschritt statt verschachtelter Logik</li>
</ul>
<p>Hinweis: Ausführliche historische Notizen sind im Archiv abgelegt. Diese Seite dient als aktuelle Referenz der Rolle und Prinzipien.</p></section><section class="print-page" id="explanations-metadata-overview" heading-number="4.7"><h1 id="explanations-metadata-overview-metadaten-ubersicht">Metadaten (Übersicht)<a class="headerlink" href="#explanations-metadata-overview-metadaten-ubersicht" title="Permanent link">&para;</a></h1>
<ul>
<li>Endpoint: <code>POST /api/transformer/metadata</code></li>
<li>Quelle: Datei + optional Text/Context</li>
<li>Ergebnis: technische + inhaltliche Metadaten (Titel, Autoren, Beschreibung, etc.)</li>
</ul>
<p>Code: <code>src/processors/metadata_processor.py</code>, <code>src/api/routes/transformer_routes.py</code> (Metadata‑Endpoint).</p></section><section class="print-page" id="explanations-llm-optimization" heading-number="4.8"><h1 id="explanations-llm-optimization-llmoptimierung">LLM‑Optimierung<a class="headerlink" href="#explanations-llm-optimization-llmoptimierung" title="Permanent link">&para;</a></h1>
<h2 id="explanations-llm-optimization-kostenleistung">Kosten/Leistung<a class="headerlink" href="#explanations-llm-optimization-kostenleistung" title="Permanent link">&para;</a></h2>
<ul>
<li>Modelle: <code>gpt-4o</code> (Qualität), <code>gpt-4o-mini</code> (Schnell/Kosten)</li>
<li>Bildgrößen/Qualität (Image‑OCR): 1024/75 (günstig), 2048/85 (Standard), 4096/95 (Qualität)</li>
</ul>
<h2 id="explanations-llm-optimization-promptskontext">Prompts/Kontext<a class="headerlink" href="#explanations-llm-optimization-promptskontext" title="Permanent link">&para;</a></h2>
<ul>
<li>Dokumenttyp im Kontext setzen (scientific/technical/presentation)</li>
<li>Zusätzliche Feldbeschreibungen (<code>additional_field_descriptions</code>) nutzen</li>
</ul>
<h2 id="explanations-llm-optimization-tracking">Tracking<a class="headerlink" href="#explanations-llm-optimization-tracking" title="Permanent link">&para;</a></h2>
<ul>
<li><code>src/core/resource_tracking.py</code> (Token/Kosten)</li>
<li>Responses: <code>process.llm_info</code></li>
</ul>
<p>Verweise: <code>processors/image-ocr/overview.md</code>, <code>processors/transformer/overview.md</code>.</p></section></section>
                    <section class='print-page md-section' id='section-5' heading-number='5'>
                        <h1>Processors<a class='headerlink' href='#section-5' title='Permanent link'></a>
                        </h1>
                    <section class="print-page" id="processors-audio-overview" heading-number="5.1"><h1 id="processors-audio-overview-audio-processor">Audio Processor<a class="headerlink" href="#processors-audio-overview-audio-processor" title="Permanent link">&para;</a></h1>
<h2 id="processors-audio-overview-endpunkte">Endpunkte<a class="headerlink" href="#processors-audio-overview-endpunkte" title="Permanent link">&para;</a></h2>
<ul>
<li>POST <code>/api/audio/process</code></li>
</ul>
<h2 id="processors-audio-overview-parameter-form">Parameter (Form)<a class="headerlink" href="#processors-audio-overview-parameter-form" title="Permanent link">&para;</a></h2>
<ul>
<li><code>file</code>: Audiodatei (multipart/form-data)</li>
<li><code>source_language</code> (ISO 639-1, default: de)</li>
<li><code>target_language</code> (ISO 639-1, default: de)</li>
<li><code>template</code> (optional)</li>
<li><code>useCache</code> (bool, default: true)</li>
</ul>
<h2 id="processors-audio-overview-unterstutzte-formate">Unterstützte Formate<a class="headerlink" href="#processors-audio-overview-unterstutzte-formate" title="Permanent link">&para;</a></h2>
<p><code>flac</code>, <code>m4a</code>, <code>mp3</code>, <code>mp4</code>, <code>mpeg</code>, <code>mpga</code>, <code>oga</code>, <code>ogg</code>, <code>wav</code>, <code>webm</code></p>
<h2 id="processors-audio-overview-beispiel-curl">Beispiel (cURL)<a class="headerlink" href="#processors-audio-overview-beispiel-curl" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Content-Type: multipart/form-data&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-F<span class="w"> </span><span class="s2">&quot;file=@tests/samples/sample_audio.m4a&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-F<span class="w"> </span><span class="s2">&quot;source_language=de&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-F<span class="w"> </span><span class="s2">&quot;target_language=de&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>http://localhost:5000/api/audio/process
</code></pre></div>
<h2 id="processors-audio-overview-hinweise">Hinweise<a class="headerlink" href="#processors-audio-overview-hinweise" title="Permanent link">&para;</a></h2>
<ul>
<li>Content-Type muss <code>multipart/form-data</code> sein.</li>
<li>Bei ungültigem Format oder fehlender Datei erfolgen valide Fehlerantworten.</li>
</ul>
<h2 id="processors-audio-overview-mogliche-fehlercodes-auszug">Mögliche Fehlercodes (Auszug)<a class="headerlink" href="#processors-audio-overview-mogliche-fehlercodes-auszug" title="Permanent link">&para;</a></h2>
<ul>
<li><code>INVALID_CONTENT_TYPE</code></li>
<li><code>MISSING_FILE</code></li>
<li><code>INVALID_FORMAT</code></li>
</ul>
<h2 id="processors-audio-overview-funktionen-kurz">Funktionen (Kurz)<a class="headerlink" href="#processors-audio-overview-funktionen-kurz" title="Permanent link">&para;</a></h2>
<ul>
<li>Transkription, Übersetzung, Segmentierung</li>
<li>Optionale Template-Ausgabe</li>
<li>Cache-Unterstützung</li>
</ul></section><section class="print-page" id="processors-video-overview" heading-number="5.2"><h1 id="processors-video-overview-video-processor">Video Processor<a class="headerlink" href="#processors-video-overview-video-processor" title="Permanent link">&para;</a></h1>
<h2 id="processors-video-overview-endpunkte">Endpunkte<a class="headerlink" href="#processors-video-overview-endpunkte" title="Permanent link">&para;</a></h2>
<ul>
<li>POST <code>/api/video/process</code> (Datei-Upload oder URL)</li>
<li>POST <code>/api/video/youtube</code> (YouTube-URL)</li>
</ul>
<h2 id="processors-video-overview-parameter-kurz">Parameter (Kurz)<a class="headerlink" href="#processors-video-overview-parameter-kurz" title="Permanent link">&para;</a></h2>
<ul>
<li>Datei-/URL-basierte Verarbeitung</li>
<li><code>source_language</code> (auto)</li>
<li><code>target_language</code> (de)</li>
<li><code>template</code> (optional)</li>
<li><code>useCache</code> (bool)</li>
<li><code>force_refresh</code> (bool, für <code>/process</code>)</li>
</ul>
<h2 id="processors-video-overview-funktionen-kurz">Funktionen (Kurz)<a class="headerlink" href="#processors-video-overview-funktionen-kurz" title="Permanent link">&para;</a></h2>
<ul>
<li>Video → Audio-Extraktion → Transkription → Transformation</li>
<li>Direkte YouTube-Unterstützung</li>
<li>Cache-Unterstützung</li>
</ul>
<h2 id="processors-video-overview-youtube-plattformen">YouTube / Plattformen<a class="headerlink" href="#processors-video-overview-youtube-plattformen" title="Permanent link">&para;</a></h2>
<ul>
<li>Unterstützt YouTube‑URLs (Download → Audio‑Extraktion → Transkription)</li>
<li>Parameter: <code>youtube_include_dash_manifest</code>, <code>best_audio_format</code></li>
<li>Hinweise: Raten‑Limits und Formatverfügbarkeit können variieren</li>
</ul>
<pre class="mermaid"><code>sequenceDiagram
  participant Client
  participant API as /api/video/youtube
  participant VP as VideoProcessor
  participant YT as YouTube
  participant TP as Transformer

  Client-&gt;&gt;API: POST { url }
  API-&gt;&gt;VP: process(url)
  VP-&gt;&gt;YT: Download + Audio‑Extraktion
  VP-&gt;&gt;TP: Transkription/Transformation
  TP--&gt;&gt;VP: Text/MD
  VP--&gt;&gt;API: BaseResponse{...}
  API--&gt;&gt;Client: JSON</code></pre></section>
                    <section class='print-page md-section' id='section-5-3' heading-number='5.3'>
                        <h1>PDF<a class='headerlink' href='#section-5-3' title='Permanent link'></a>
                        </h1>
                    <section class="print-page" id="processors-pdf-overview" heading-number="5.3.1"><h1 id="processors-pdf-overview-pdf-processor">PDF Processor<a class="headerlink" href="#processors-pdf-overview-pdf-processor" title="Permanent link">&para;</a></h1>
<h2 id="processors-pdf-overview-endpunkte">Endpunkte<a class="headerlink" href="#processors-pdf-overview-endpunkte" title="Permanent link">&para;</a></h2>
<ul>
<li>POST <code>/api/pdf/process</code></li>
<li>POST <code>/api/pdf/process-url</code></li>
<li>GET <code>/api/pdf/text-content/&lt;path:file_path&gt;</code></li>
</ul>
<h2 id="processors-pdf-overview-funktionen-kurz">Funktionen (Kurz)<a class="headerlink" href="#processors-pdf-overview-funktionen-kurz" title="Permanent link">&para;</a></h2>
<ul>
<li>Native Textextraktion, Tesseract-OCR, LLM-gestützte OCR</li>
<li>Vorschaubilder und optional ZIP-Archiv</li>
<li>Cache-Unterstützung (MD5-Hash)</li>
</ul>
<pre class="mermaid"><code>flowchart TD
  S[PDF/Image] --&gt; A{OCR-Mode}
  A --&gt;|Native| N[Text-Extraction]
  A --&gt;|Tesseract| T[Tesseract OCR]
  A --&gt;|LLM| L[Vision LLM]
  N --&gt; X[Postprocess -&gt; Markdown]
  T --&gt; X
  L --&gt; X
  X --&gt; R[Optional: Transformer]</code></pre>
<h2 id="processors-pdf-overview-weiterfuhrend">Weiterführend<a class="headerlink" href="#processors-pdf-overview-weiterfuhrend" title="Permanent link">&para;</a></h2>
<ul>
<li>OCR-Refactoring: <a href="#processors-pdf-ocr-refactoring">ocr-refactoring.md</a></li>
<li>PDF/ImageOCR Endpoints: <a href="#processors-pdf-endpoints">endpoints.md</a></li>
</ul></section><section class="print-page" id="processors-pdf-ocr-refactoring" heading-number="5.3.2"><h1 id="processors-pdf-ocr-refactoring-pdf-processor-ocr-refactoring">PDF Processor OCR Refactoring<a class="headerlink" href="#processors-pdf-ocr-refactoring-pdf-processor-ocr-refactoring" title="Permanent link">&para;</a></h1>
<h2 id="processors-pdf-ocr-refactoring-problemstellung">Problemstellung<a class="headerlink" href="#processors-pdf-ocr-refactoring-problemstellung" title="Permanent link">&para;</a></h2>
<p>Der PDF Processor führte OCR direkt mit pytesseract durch, ohne das Caching des ImageOCR Processors zu nutzen. Dies führte zu:</p>
<ol>
<li><strong>Code-Duplikation</strong>: Identische OCR-Logik in beiden Processoren</li>
<li><strong>Performance-Verlust</strong>: Kein OCR-Caching bei PDF-Verarbeitung</li>
<li><strong>Inkonsistente Fehlerbehandlung</strong>: Unterschiedliche OCR-Fehlerbehandlung</li>
<li><strong>Wartungsprobleme</strong>: OCR-Logik an mehreren Stellen zu pflegen</li>
</ol>
<h2 id="processors-pdf-ocr-refactoring-losung-integration-des-imageocr-processors">Lösung: Integration des ImageOCR Processors<a class="headerlink" href="#processors-pdf-ocr-refactoring-losung-integration-des-imageocr-processors" title="Permanent link">&para;</a></h2>
<h3 id="processors-pdf-ocr-refactoring-vorher-direkte-pytesseract-aufrufe">Vorher: Direkte pytesseract-Aufrufe<a class="headerlink" href="#processors-pdf-ocr-refactoring-vorher-direkte-pytesseract-aufrufe" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># PDF Processor - Direkte OCR ohne Caching</span>
<span class="n">page_ocr</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">pytesseract</span><span class="o">.</span><span class="n">image_to_string</span><span class="p">(</span>
    <span class="n">image</span><span class="o">=</span><span class="n">img</span><span class="p">,</span>
    <span class="n">lang</span><span class="o">=</span><span class="s1">&#39;deu&#39;</span><span class="p">,</span>
    <span class="n">config</span><span class="o">=</span><span class="s1">&#39;--psm 3&#39;</span>
<span class="p">))</span>
</code></pre></div>
<h3 id="processors-pdf-ocr-refactoring-nachher-imageocr-processor-integration">Nachher: ImageOCR Processor Integration<a class="headerlink" href="#processors-pdf-ocr-refactoring-nachher-imageocr-processor-integration" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># PDF Processor - OCR mit Caching über ImageOCR Processor</span>
<span class="n">ocr_result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">imageocr_processor</span><span class="o">.</span><span class="n">process</span><span class="p">(</span>
    <span class="n">file_path</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">image_path</span><span class="p">),</span>
    <span class="n">template</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">,</span>
    <span class="n">extraction_method</span><span class="o">=</span><span class="s2">&quot;ocr&quot;</span><span class="p">,</span>
    <span class="n">use_cache</span><span class="o">=</span><span class="n">use_cache</span><span class="p">,</span>  <span class="c1"># Cache-Nutzung vom PDF-Processor übernehmen</span>
    <span class="n">file_hash</span><span class="o">=</span><span class="kc">None</span>
<span class="p">)</span>
</code></pre></div>
<h2 id="processors-pdf-ocr-refactoring-vorteile-der-refactoring">Vorteile der Refactoring<a class="headerlink" href="#processors-pdf-ocr-refactoring-vorteile-der-refactoring" title="Permanent link">&para;</a></h2>
<h3 id="processors-pdf-ocr-refactoring-1-caching-optimierung">1. <strong>Caching-Optimierung</strong><a class="headerlink" href="#processors-pdf-ocr-refactoring-1-caching-optimierung" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Vorher</strong>: Jede PDF-Seite wird neu OCR-verarbeitet</li>
<li><strong>Nachher</strong>: Identische Bilder werden aus dem Cache wiederverwendet</li>
<li><strong>Performance-Gewinn</strong>: Bis zu 90% Zeitersparnis bei wiederholten Verarbeitungen</li>
</ul>
<h3 id="processors-pdf-ocr-refactoring-2-code-konsolidierung">2. <strong>Code-Konsolidierung</strong><a class="headerlink" href="#processors-pdf-ocr-refactoring-2-code-konsolidierung" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Eliminierung</strong>: Duplizierter OCR-Code entfernt</li>
<li><strong>Zentralisierung</strong>: OCR-Logik nur im ImageOCR Processor</li>
<li><strong>Wartbarkeit</strong>: Änderungen nur an einer Stelle nötig</li>
</ul>
<h3 id="processors-pdf-ocr-refactoring-3-konsistente-fehlerbehandlung">3. <strong>Konsistente Fehlerbehandlung</strong><a class="headerlink" href="#processors-pdf-ocr-refactoring-3-konsistente-fehlerbehandlung" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Einheitlich</strong>: Gleiche OCR-Fehlerbehandlung in beiden Processoren</li>
<li><strong>Robust</strong>: Bessere Fallback-Mechanismen (Deutsch → Englisch)</li>
<li><strong>Logging</strong>: Einheitliche Logging-Strategie</li>
</ul>
<h3 id="processors-pdf-ocr-refactoring-4-resource-tracking">4. <strong>Resource-Tracking</strong><a class="headerlink" href="#processors-pdf-ocr-refactoring-4-resource-tracking" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Vollständig</strong>: LLM-Tracking für OCR-Operationen</li>
<li><strong>Transparent</strong>: Bessere Performance-Monitoring</li>
<li><strong>Kosten</strong>: Genaue Kostenverfolgung für OCR-Requests</li>
</ul>
<h2 id="processors-pdf-ocr-refactoring-implementierungsdetails">Implementierungsdetails<a class="headerlink" href="#processors-pdf-ocr-refactoring-implementierungsdetails" title="Permanent link">&para;</a></h2>
<h3 id="processors-pdf-ocr-refactoring-neue-dependencies">Neue Dependencies<a class="headerlink" href="#processors-pdf-ocr-refactoring-neue-dependencies" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">from</span><span class="w"> </span><span class="nn">src.processors.imageocr_processor</span><span class="w"> </span><span class="kn">import</span> <span class="n">ImageOCRProcessor</span>
</code></pre></div>
<h3 id="processors-pdf-ocr-refactoring-initialisierung">Initialisierung<a class="headerlink" href="#processors-pdf-ocr-refactoring-initialisierung" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Initialisiere ImageOCR Processor für OCR-Aufgaben</span>
<span class="bp">self</span><span class="o">.</span><span class="n">imageocr_processor</span> <span class="o">=</span> <span class="n">ImageOCRProcessor</span><span class="p">(</span>
    <span class="n">resource_calculator</span><span class="p">,</span>
    <span class="n">process_id</span><span class="p">,</span>
    <span class="n">parent_process_info</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">process_info</span>
<span class="p">)</span>
</code></pre></div>
<h3 id="processors-pdf-ocr-refactoring-ocr-verarbeitung">OCR-Verarbeitung<a class="headerlink" href="#processors-pdf-ocr-refactoring-ocr-verarbeitung" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># OCR mit ImageOCR Processor (nutzt Caching)</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">ocr_result</span> <span class="o">=</span> <span class="k">await</span> <span class="bp">self</span><span class="o">.</span><span class="n">imageocr_processor</span><span class="o">.</span><span class="n">process</span><span class="p">(</span>
        <span class="n">file_path</span><span class="o">=</span><span class="nb">str</span><span class="p">(</span><span class="n">image_path</span><span class="p">),</span>
        <span class="n">template</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>  <span class="c1"># Kein Template für PDF-Seiten</span>
        <span class="n">context</span><span class="o">=</span><span class="n">context</span><span class="p">,</span>
        <span class="n">extraction_method</span><span class="o">=</span><span class="s2">&quot;ocr&quot;</span><span class="p">,</span>
        <span class="n">use_cache</span><span class="o">=</span><span class="n">use_cache</span><span class="p">,</span>
        <span class="n">file_hash</span><span class="o">=</span><span class="kc">None</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">ocr_result</span><span class="o">.</span><span class="n">data</span> <span class="ow">and</span> <span class="n">ocr_result</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">extracted_text</span><span class="p">:</span>
        <span class="n">page_ocr</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">ocr_result</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">extracted_text</span><span class="p">)</span>
        <span class="c1"># ... weitere Verarbeitung</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Kein OCR-Text für Seite </span><span class="si">{</span><span class="n">page_num</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2"> extrahiert&quot;</span><span class="p">)</span>

<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">ocr_error</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Fehler bei OCR für Seite </span><span class="si">{</span><span class="n">page_num</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">ocr_error</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
<h2 id="processors-pdf-ocr-refactoring-cache-strategie">Cache-Strategie<a class="headerlink" href="#processors-pdf-ocr-refactoring-cache-strategie" title="Permanent link">&para;</a></h2>
<h3 id="processors-pdf-ocr-refactoring-cache-keys">Cache-Keys<a class="headerlink" href="#processors-pdf-ocr-refactoring-cache-keys" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>ImageOCR Processor</strong>: Basierend auf Bildinhalt-Hash</li>
<li><strong>PDF Processor</strong>: Übernimmt Cache-Nutzung vom ImageOCR Processor</li>
<li><strong>Konsistenz</strong>: Gleiche Bilder werden identisch gecacht</li>
</ul>
<h3 id="processors-pdf-ocr-refactoring-cache-hierarchie">Cache-Hierarchie<a class="headerlink" href="#processors-pdf-ocr-refactoring-cache-hierarchie" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>PDF Cache (pdf_cache)
├── PDF-Metadaten
├── Extraktionsmethoden
└── Template-Transformationen

OCR Cache (ocr_cache)
├── Bild-Hashes
├── OCR-Ergebnisse
└── Template-Transformationen
</code></pre></div>
<h2 id="processors-pdf-ocr-refactoring-performance-metriken">Performance-Metriken<a class="headerlink" href="#processors-pdf-ocr-refactoring-performance-metriken" title="Permanent link">&para;</a></h2>
<h3 id="processors-pdf-ocr-refactoring-vorher-direkte-ocr">Vorher (Direkte OCR)<a class="headerlink" href="#processors-pdf-ocr-refactoring-vorher-direkte-ocr" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Cache-Hits</strong>: 0% (kein OCR-Caching)</li>
<li><strong>Wiederholte Verarbeitung</strong>: 100% CPU-Last</li>
<li><strong>Speicherverbrauch</strong>: Höher (keine Wiederverwendung)</li>
</ul>
<h3 id="processors-pdf-ocr-refactoring-nachher-imageocr-integration">Nachher (ImageOCR Integration)<a class="headerlink" href="#processors-pdf-ocr-refactoring-nachher-imageocr-integration" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Cache-Hits</strong>: 60-80% bei wiederholten Dokumenten</li>
<li><strong>Wiederholte Verarbeitung</strong>: 10-40% CPU-Last</li>
<li><strong>Speicherverbrauch</strong>: Optimiert durch Caching</li>
</ul>
<h2 id="processors-pdf-ocr-refactoring-backward-compatibility">Backward Compatibility<a class="headerlink" href="#processors-pdf-ocr-refactoring-backward-compatibility" title="Permanent link">&para;</a></h2>
<ul>
<li><strong>API-Endpoints</strong>: Unverändert</li>
<li><strong>Response-Format</strong>: Identisch</li>
<li><strong>Parameter</strong>: Alle bestehenden Parameter funktionieren</li>
<li><strong>Fehlerbehandlung</strong>: Verbessert, aber abwärtskompatibel</li>
</ul>
<h2 id="processors-pdf-ocr-refactoring-testing">Testing<a class="headerlink" href="#processors-pdf-ocr-refactoring-testing" title="Permanent link">&para;</a></h2>
<h3 id="processors-pdf-ocr-refactoring-unit-tests">Unit Tests<a class="headerlink" href="#processors-pdf-ocr-refactoring-unit-tests" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_pdf_processor_uses_imageocr_for_ocr</span><span class="p">():</span>
    <span class="c1"># Test dass PDF Processor ImageOCR Processor für OCR verwendet</span>
    <span class="k">pass</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_pdf_processor_ocr_caching</span><span class="p">():</span>
    <span class="c1"># Test dass OCR-Ergebnisse gecacht werden</span>
    <span class="k">pass</span>
</code></pre></div>
<h3 id="processors-pdf-ocr-refactoring-integration-tests">Integration Tests<a class="headerlink" href="#processors-pdf-ocr-refactoring-integration-tests" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">test_pdf_ocr_performance_improvement</span><span class="p">():</span>
    <span class="c1"># Test Performance-Verbesserung durch Caching</span>
    <span class="k">pass</span>
</code></pre></div>
<h2 id="processors-pdf-ocr-refactoring-monitoring">Monitoring<a class="headerlink" href="#processors-pdf-ocr-refactoring-monitoring" title="Permanent link">&para;</a></h2>
<h3 id="processors-pdf-ocr-refactoring-logging">Logging<a class="headerlink" href="#processors-pdf-ocr-refactoring-logging" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Cache-Hits</strong>: Tracking von OCR-Cache-Treffern</li>
<li><strong>Performance</strong>: Messung der OCR-Verarbeitungszeit</li>
<li><strong>Fehler</strong>: Einheitliche OCR-Fehlerprotokollierung</li>
</ul>
<h3 id="processors-pdf-ocr-refactoring-metrics">Metrics<a class="headerlink" href="#processors-pdf-ocr-refactoring-metrics" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>OCR-Cache-Hit-Rate</strong>: Prozentsatz der Cache-Treffer</li>
<li><strong>OCR-Processing-Time</strong>: Durchschnittliche OCR-Verarbeitungszeit</li>
<li><strong>OCR-Error-Rate</strong>: Fehlerrate bei OCR-Operationen</li>
</ul>
<h2 id="processors-pdf-ocr-refactoring-fazit">Fazit<a class="headerlink" href="#processors-pdf-ocr-refactoring-fazit" title="Permanent link">&para;</a></h2>
<p>Die Integration des ImageOCR Processors in den PDF Processor löst mehrere wichtige Probleme:</p>
<ol>
<li><strong>Performance</strong>: Deutliche Verbesserung durch OCR-Caching</li>
<li><strong>Wartbarkeit</strong>: Konsolidierung der OCR-Logik</li>
<li><strong>Konsistenz</strong>: Einheitliche OCR-Behandlung</li>
<li><strong>Skalierbarkeit</strong>: Bessere Resource-Nutzung</li>
</ol>
<p>Diese Refactoring-Maßnahme folgt dem DRY-Prinzip (Don't Repeat Yourself) und verbessert die Gesamtarchitektur des Systems erheblich. </p></section><section class="print-page" id="processors-pdf-endpoints" heading-number="5.3.3"><h1 id="processors-pdf-endpoints-pdf-und-imageocr-prozessoren-dokumentation">PDF- und ImageOCR-Prozessoren Dokumentation<a class="headerlink" href="#processors-pdf-endpoints-pdf-und-imageocr-prozessoren-dokumentation" title="Permanent link">&para;</a></h1>
<h2 id="processors-pdf-endpoints-ubersicht">Übersicht<a class="headerlink" href="#processors-pdf-endpoints-ubersicht" title="Permanent link">&para;</a></h2>
<p>Die CommonSecretaryServices bieten zwei spezialisierte Prozessoren für die Verarbeitung von Dokumenten und Bildern:</p>
<ul>
<li><strong>PDF-Processor</strong>: Verarbeitet PDF-Dateien und extrahiert Text, Metadaten und Vorschaubilder</li>
<li><strong>ImageOCR-Processor</strong>: Führt OCR (Optical Character Recognition) auf Bildern durch</li>
</ul>
<p>Beide Prozessoren unterstützen:
- Upload von lokalen Dateien
- Verarbeitung von URLs
- Template-basierte Transformation
- Caching für bessere Performance
- Verschiedene Extraktionsmethoden</p>
<h2 id="processors-pdf-endpoints-pdf-processor">PDF-Processor<a class="headerlink" href="#processors-pdf-endpoints-pdf-processor" title="Permanent link">&para;</a></h2>
<h3 id="processors-pdf-endpoints-verfugbare-endpoints">Verfügbare Endpoints<a class="headerlink" href="#processors-pdf-endpoints-verfugbare-endpoints" title="Permanent link">&para;</a></h3>
<h4 id="processors-pdf-endpoints-1-pdfprocess-datei-upload">1. <code>/pdf/process</code> - Datei-Upload<a class="headerlink" href="#processors-pdf-endpoints-1-pdfprocess-datei-upload" title="Permanent link">&para;</a></h4>
<p>Verarbeitet eine hochgeladene PDF-Datei.</p>
<p><strong>HTTP-Methode</strong>: POST<br />
<strong>Content-Type</strong>: multipart/form-data</p>
<p><strong>Parameter</strong>:
- <code>file</code> (required): PDF-Datei
- <code>extraction_method</code> (optional): Extraktionsmethode (default: "native")
  - <code>native</code>: Nur Textextraktion
  - <code>ocr</code>: Nur OCR-Verarbeitung
  - <code>both</code>: Text und OCR
  - <code>preview</code>: Nur Vorschaubilder
  - <code>preview_and_native</code>: Vorschaubilder und Text
- <code>template</code> (optional): Template für Transformation
- <code>context</code> (optional): JSON-Kontext für Verarbeitung
- <code>useCache</code> (optional): Cache verwenden (default: true)</p>
<h4 id="processors-pdf-endpoints-2-pdfprocess-url-url-verarbeitung">2. <code>/pdf/process-url</code> - URL-Verarbeitung<a class="headerlink" href="#processors-pdf-endpoints-2-pdfprocess-url-url-verarbeitung" title="Permanent link">&para;</a></h4>
<p>Verarbeitet eine PDF-Datei von einer URL.</p>
<p><strong>HTTP-Methode</strong>: POST<br />
<strong>Content-Type</strong>: application/x-www-form-urlencoded</p>
<p><strong>Parameter</strong>:
- <code>url</code> (required): URL zur PDF-Datei
- Weitere Parameter wie bei <code>/pdf/process</code></p>
<h4 id="processors-pdf-endpoints-3-pdftext-contentpathfile_path-textinhalt-abrufen">3. <code>/pdf/text-content/&lt;path:file_path&gt;</code> - Textinhalt abrufen<a class="headerlink" href="#processors-pdf-endpoints-3-pdftext-contentpathfile_path-textinhalt-abrufen" title="Permanent link">&para;</a></h4>
<p>Ruft den Inhalt einer durch den PDF-Prozessor erstellten Textdatei ab.</p>
<p><strong>HTTP-Methode</strong>: GET</p>
<h3 id="processors-pdf-endpoints-anwendungsbeispiele-pdf-processor">Anwendungsbeispiele PDF-Processor<a class="headerlink" href="#processors-pdf-endpoints-anwendungsbeispiele-pdf-processor" title="Permanent link">&para;</a></h3>
<h4 id="processors-pdf-endpoints-beispiel-1-einfache-pdf-textextraktion">Beispiel 1: Einfache PDF-Textextraktion<a class="headerlink" href="#processors-pdf-endpoints-beispiel-1-einfache-pdf-textextraktion" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span><span class="s2">&quot;http://localhost:8000/pdf/process&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-F<span class="w"> </span><span class="s2">&quot;file=@dokument.pdf&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-F<span class="w"> </span><span class="s2">&quot;extraction_method=native&quot;</span>
</code></pre></div>
<h4 id="processors-pdf-endpoints-beispiel-2-pdf-mit-ocr-und-template">Beispiel 2: PDF mit OCR und Template<a class="headerlink" href="#processors-pdf-endpoints-beispiel-2-pdf-mit-ocr-und-template" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span><span class="s2">&quot;http://localhost:8000/pdf/process&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-F<span class="w"> </span><span class="s2">&quot;file=@gescanntes_dokument.pdf&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-F<span class="w"> </span><span class="s2">&quot;extraction_method=ocr&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-F<span class="w"> </span><span class="s2">&quot;template=Metadata&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-F<span class="w"> </span><span class="s2">&quot;context={\&quot;document_type\&quot;: \&quot;invoice\&quot;}&quot;</span>
</code></pre></div>
<h4 id="processors-pdf-endpoints-beispiel-3-pdf-von-url-mit-vorschaubildern">Beispiel 3: PDF von URL mit Vorschaubildern<a class="headerlink" href="#processors-pdf-endpoints-beispiel-3-pdf-von-url-mit-vorschaubildern" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span><span class="s2">&quot;http://localhost:8000/pdf/process-url&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span><span class="s2">&quot;url=https://example.com/dokument.pdf&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span><span class="s2">&quot;extraction_method=preview_and_native&quot;</span>
</code></pre></div>
<h4 id="processors-pdf-endpoints-beispiel-4-powerpoint-datei-von-url">Beispiel 4: PowerPoint-Datei von URL<a class="headerlink" href="#processors-pdf-endpoints-beispiel-4-powerpoint-datei-von-url" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span><span class="s2">&quot;http://localhost:8000/pdf/process-url&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span><span class="s2">&quot;url=https://example.com/presentation.pptx&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span><span class="s2">&quot;extraction_method=both&quot;</span>
</code></pre></div>
<h3 id="processors-pdf-endpoints-antwortformat-pdf-processor">Antwortformat PDF-Processor<a class="headerlink" href="#processors-pdf-endpoints-antwortformat-pdf-processor" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;success&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;request&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;processor&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PDFProcessor&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;timestamp&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-01-15T10:30:00Z&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;file_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;dokument.pdf&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;extraction_method&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;native&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;process&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;pdf_12345&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;main_processor&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PDFProcessor&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;started&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-01-15T10:30:00Z&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;completed&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-01-15T10:30:05Z&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;sub_processors&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;text_extractor&quot;</span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;llm_info&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;model&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;gpt-4&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;tokens_used&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">150</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;data&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;file_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;dokument.pdf&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;file_size&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1024000</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;page_count&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;format&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PDF&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;process_dir&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cache/pdf_12345/&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;text_contents&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">          </span><span class="nt">&quot;page&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="w">          </span><span class="nt">&quot;content&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Seite 1 Textinhalt...&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">],</span>
<span class="w">      </span><span class="nt">&quot;extraction_method&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;native&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;extracted_text&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Vollständiger extrahierter Text...&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;process_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;pdf_12345&quot;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="processors-pdf-endpoints-imageocr-processor">ImageOCR-Processor<a class="headerlink" href="#processors-pdf-endpoints-imageocr-processor" title="Permanent link">&para;</a></h2>
<h3 id="processors-pdf-endpoints-verfugbare-endpoints_1">Verfügbare Endpoints<a class="headerlink" href="#processors-pdf-endpoints-verfugbare-endpoints_1" title="Permanent link">&para;</a></h3>
<h4 id="processors-pdf-endpoints-1-imageocrprocess-datei-upload">1. <code>/imageocr/process</code> - Datei-Upload<a class="headerlink" href="#processors-pdf-endpoints-1-imageocrprocess-datei-upload" title="Permanent link">&para;</a></h4>
<p>Verarbeitet ein hochgeladenes Bild mit OCR.</p>
<p><strong>HTTP-Methode</strong>: POST<br />
<strong>Content-Type</strong>: multipart/form-data</p>
<p><strong>Parameter</strong>:
- <code>file</code> (required): Bilddatei
- <code>extraction_method</code> (optional): Extraktionsmethode (default: "ocr")
- <code>template</code> (optional): Template für Transformation
- <code>context</code> (optional): JSON-Kontext für Verarbeitung
- <code>useCache</code> (optional): Cache verwenden (default: true)</p>
<h4 id="processors-pdf-endpoints-2-imageocrprocess-url-url-verarbeitung">2. <code>/imageocr/process-url</code> - URL-Verarbeitung<a class="headerlink" href="#processors-pdf-endpoints-2-imageocrprocess-url-url-verarbeitung" title="Permanent link">&para;</a></h4>
<p>Verarbeitet ein Bild von einer URL mit OCR.</p>
<p><strong>HTTP-Methode</strong>: POST<br />
<strong>Content-Type</strong>: application/x-www-form-urlencoded</p>
<p><strong>Parameter</strong>:
- <code>url</code> (required): URL zum Bild
- Weitere Parameter wie bei <code>/imageocr/process</code></p>
<h3 id="processors-pdf-endpoints-anwendungsbeispiele-imageocr-processor">Anwendungsbeispiele ImageOCR-Processor<a class="headerlink" href="#processors-pdf-endpoints-anwendungsbeispiele-imageocr-processor" title="Permanent link">&para;</a></h3>
<h4 id="processors-pdf-endpoints-beispiel-1-einfache-bild-ocr">Beispiel 1: Einfache Bild-OCR<a class="headerlink" href="#processors-pdf-endpoints-beispiel-1-einfache-bild-ocr" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span><span class="s2">&quot;http://localhost:8000/imageocr/process&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-F<span class="w"> </span><span class="s2">&quot;file=@screenshot.png&quot;</span>
</code></pre></div>
<h4 id="processors-pdf-endpoints-beispiel-2-bild-mit-template-transformation">Beispiel 2: Bild mit Template-Transformation<a class="headerlink" href="#processors-pdf-endpoints-beispiel-2-bild-mit-template-transformation" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span><span class="s2">&quot;http://localhost:8000/imageocr/process&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-F<span class="w"> </span><span class="s2">&quot;file=@rechnung.jpg&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-F<span class="w"> </span><span class="s2">&quot;template=Metadata&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-F<span class="w"> </span><span class="s2">&quot;context={\&quot;document_type\&quot;: \&quot;invoice\&quot;}&quot;</span>
</code></pre></div>
<h4 id="processors-pdf-endpoints-beispiel-3-bild-von-url-verarbeiten">Beispiel 3: Bild von URL verarbeiten<a class="headerlink" href="#processors-pdf-endpoints-beispiel-3-bild-von-url-verarbeiten" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span><span class="s2">&quot;http://localhost:8000/imageocr/process-url&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span><span class="s2">&quot;url=https://example.com/image.png&quot;</span>
</code></pre></div>
<h4 id="processors-pdf-endpoints-beispiel-4-mit-deaktiviertem-cache">Beispiel 4: Mit deaktiviertem Cache<a class="headerlink" href="#processors-pdf-endpoints-beispiel-4-mit-deaktiviertem-cache" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span><span class="s2">&quot;http://localhost:8000/imageocr/process&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-F<span class="w"> </span><span class="s2">&quot;file=@dynamic_content.png&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-F<span class="w"> </span><span class="s2">&quot;useCache=false&quot;</span>
</code></pre></div>
<h3 id="processors-pdf-endpoints-antwortformat-imageocr-processor">Antwortformat ImageOCR-Processor<a class="headerlink" href="#processors-pdf-endpoints-antwortformat-imageocr-processor" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;success&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;request&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;processor&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ImageOCRProcessor&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;timestamp&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-01-15T10:30:00Z&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;parameters&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;file_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;screenshot.png&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;extraction_method&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ocr&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;process&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ocr_12345&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;main_processor&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ImageOCRProcessor&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;started&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-01-15T10:30:00Z&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;completed&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2024-01-15T10:30:03Z&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;sub_processors&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;tesseract_ocr&quot;</span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;llm_info&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;model&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;gpt-4&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;tokens_used&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">80</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">},</span>
<span class="w">  </span><span class="nt">&quot;data&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;metadata&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;file_name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;screenshot.png&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;file_size&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">512000</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;dimensions&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1920x1080&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;format&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;PNG&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;process_dir&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;cache/ocr_12345/&quot;</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;extracted_text&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Extrahierter Text aus dem Bild...&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;formatted_text&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Formatierter Text (wenn Template verwendet)...&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;process_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ocr_12345&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;model&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;tesseract&quot;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="processors-pdf-endpoints-template-system">Template-System<a class="headerlink" href="#processors-pdf-endpoints-template-system" title="Permanent link">&para;</a></h2>
<p>Beide Prozessoren unterstützen Templates zur Transformation der extrahierten Daten:</p>
<h3 id="processors-pdf-endpoints-verfugbare-templates">Verfügbare Templates<a class="headerlink" href="#processors-pdf-endpoints-verfugbare-templates" title="Permanent link">&para;</a></h3>
<ul>
<li><code>Metadata</code>: Strukturierte Metadaten-Extraktion</li>
<li><code>Blogeintrag</code>: Blog-Artikel Format</li>
<li><code>Besprechung</code>: Besprechungsprotokoll</li>
<li><code>Session_de</code>: Deutsche Session-Beschreibung</li>
<li><code>Youtube</code>: YouTube-Video Beschreibung</li>
</ul>
<h3 id="processors-pdf-endpoints-template-verwendung">Template-Verwendung<a class="headerlink" href="#processors-pdf-endpoints-template-verwendung" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Mit Metadata-Template</span>
curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span><span class="s2">&quot;http://localhost:8000/pdf/process&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-F<span class="w"> </span><span class="s2">&quot;file=@dokument.pdf&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-F<span class="w"> </span><span class="s2">&quot;template=Metadata&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-F<span class="w"> </span><span class="s2">&quot;context={\&quot;language\&quot;: \&quot;de\&quot;, \&quot;category\&quot;: \&quot;technical\&quot;}&quot;</span>
</code></pre></div>
<h2 id="processors-pdf-endpoints-unterstutzte-dateiformate">Unterstützte Dateiformate<a class="headerlink" href="#processors-pdf-endpoints-unterstutzte-dateiformate" title="Permanent link">&para;</a></h2>
<h3 id="processors-pdf-endpoints-pdf-processor_1">PDF-Processor<a class="headerlink" href="#processors-pdf-endpoints-pdf-processor_1" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>PDF-Dateien</strong>: .pdf</li>
<li><strong>PowerPoint-Dateien</strong>: .ppt, .pptx (werden automatisch zu PDF konvertiert)</li>
<li><strong>URLs</strong>: HTTP/HTTPS-Links zu unterstützten Dateien</li>
</ul>
<h3 id="processors-pdf-endpoints-imageocr-processor_1">ImageOCR-Processor<a class="headerlink" href="#processors-pdf-endpoints-imageocr-processor_1" title="Permanent link">&para;</a></h3>
<ul>
<li><strong>Bildformate</strong>: .png, .jpg, .jpeg, .gif, .bmp, .tiff</li>
<li><strong>URLs</strong>: HTTP/HTTPS-Links zu Bildern</li>
</ul>
<h2 id="processors-pdf-endpoints-extraktionsmethoden">Extraktionsmethoden<a class="headerlink" href="#processors-pdf-endpoints-extraktionsmethoden" title="Permanent link">&para;</a></h2>
<h3 id="processors-pdf-endpoints-pdf-processor-extraktionsmethoden">PDF-Processor Extraktionsmethoden<a class="headerlink" href="#processors-pdf-endpoints-pdf-processor-extraktionsmethoden" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Methode</th>
<th>Beschreibung</th>
<th>Verwendung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>native</code></td>
<td>Nur Textextraktion</td>
<td>Für digitale PDFs mit vorhandenem Text</td>
</tr>
<tr>
<td><code>ocr</code></td>
<td>Nur OCR-Verarbeitung</td>
<td>Für gescannte Dokumente</td>
</tr>
<tr>
<td><code>both</code></td>
<td>Text und OCR</td>
<td>Für gemischte Dokumente</td>
</tr>
<tr>
<td><code>preview</code></td>
<td>Nur Vorschaubilder</td>
<td>Für visuelle Analyse</td>
</tr>
<tr>
<td><code>preview_and_native</code></td>
<td>Vorschaubilder und Text</td>
<td>Für komplette Dokumentanalyse</td>
</tr>
</tbody>
</table>
<h3 id="processors-pdf-endpoints-imageocr-processor-extraktionsmethoden">ImageOCR-Processor Extraktionsmethoden<a class="headerlink" href="#processors-pdf-endpoints-imageocr-processor-extraktionsmethoden" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Methode</th>
<th>Beschreibung</th>
<th>Verwendung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ocr</code></td>
<td>Standard-OCR</td>
<td>Für die meisten Bildtypen</td>
</tr>
</tbody>
</table>
<h2 id="processors-pdf-endpoints-caching">Caching<a class="headerlink" href="#processors-pdf-endpoints-caching" title="Permanent link">&para;</a></h2>
<p>Beide Prozessoren verwenden intelligentes Caching:</p>
<ul>
<li><strong>Cache-Key</strong>: Basiert auf Datei-Hash (MD5) oder URL-Hash</li>
<li><strong>Cache-Dauer</strong>: Konfigurierbar über <code>config.yaml</code></li>
<li><strong>Cache-Deaktivierung</strong>: <code>useCache=false</code> Parameter</li>
<li><strong>Cache-Speicherort</strong>: <code>cache/</code> Verzeichnis</li>
</ul>
<h3 id="processors-pdf-endpoints-cache-beispiele">Cache-Beispiele<a class="headerlink" href="#processors-pdf-endpoints-cache-beispiele" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Mit Cache (Standard)</span>
curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span><span class="s2">&quot;http://localhost:8000/pdf/process&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-F<span class="w"> </span><span class="s2">&quot;file=@dokument.pdf&quot;</span>

<span class="c1"># Ohne Cache</span>
curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span><span class="s2">&quot;http://localhost:8000/pdf/process&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-F<span class="w"> </span><span class="s2">&quot;file=@dokument.pdf&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-F<span class="w"> </span><span class="s2">&quot;useCache=false&quot;</span>
</code></pre></div>
<h2 id="processors-pdf-endpoints-performance-optimierung">Performance-Optimierung<a class="headerlink" href="#processors-pdf-endpoints-performance-optimierung" title="Permanent link">&para;</a></h2>
<h3 id="processors-pdf-endpoints-best-practices">Best Practices<a class="headerlink" href="#processors-pdf-endpoints-best-practices" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Cache nutzen</strong>: Für wiederkehrende Verarbeitungen</li>
<li><strong>Richtige Extraktionsmethode wählen</strong>: </li>
<li><code>native</code> für digitale PDFs</li>
<li><code>ocr</code> nur wenn nötig</li>
<li><strong>Template-Verwendung</strong>: Für strukturierte Ausgaben</li>
<li><strong>Dateigrößen beachten</strong>: Große Dateien länger Verarbeitungszeit</li>
<li><strong>URL-Verarbeitung</strong>: Für entfernte Dateien ohne lokalen Download</li>
</ol>
<h3 id="processors-pdf-endpoints-performance-monitoring">Performance-Monitoring<a class="headerlink" href="#processors-pdf-endpoints-performance-monitoring" title="Permanent link">&para;</a></h3>
<p>Jede Antwort enthält <code>process.llm_info</code> mit:
- Verwendetem Modell
- Token-Verbrauch
- Verarbeitungszeit</p>
<h2 id="processors-pdf-endpoints-fehlerbehandlung">Fehlerbehandlung<a class="headerlink" href="#processors-pdf-endpoints-fehlerbehandlung" title="Permanent link">&para;</a></h2>
<h3 id="processors-pdf-endpoints-haufige-fehler">Häufige Fehler<a class="headerlink" href="#processors-pdf-endpoints-haufige-fehler" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>Fehlercode</th>
<th>Beschreibung</th>
<th>Lösung</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ProcessingError</code></td>
<td>Allgemeiner Verarbeitungsfehler</td>
<td>Datei und Parameter prüfen</td>
</tr>
<tr>
<td><code>FileNotFoundError</code></td>
<td>Datei nicht gefunden</td>
<td>Pfad und Berechtigung prüfen</td>
</tr>
<tr>
<td><code>ValidationError</code></td>
<td>Ungültige Parameter</td>
<td>Parameter-Format prüfen</td>
</tr>
<tr>
<td><code>NetworkError</code></td>
<td>URL nicht erreichbar</td>
<td>URL und Internetverbindung prüfen</td>
</tr>
</tbody>
</table>
<h3 id="processors-pdf-endpoints-fehler-antwortformat">Fehler-Antwortformat<a class="headerlink" href="#processors-pdf-endpoints-fehler-antwortformat" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="p">{</span>
<span class="w">  </span><span class="nt">&quot;status&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;error&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="nt">&quot;error&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;code&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ProcessingError&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;message&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Datei konnte nicht verarbeitet werden&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;details&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="nt">&quot;error_type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;ProcessingError&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="nt">&quot;traceback&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Detaillierte Fehlerinformationen...&quot;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h2 id="processors-pdf-endpoints-integration-und-workflow">Integration und Workflow<a class="headerlink" href="#processors-pdf-endpoints-integration-und-workflow" title="Permanent link">&para;</a></h2>
<h3 id="processors-pdf-endpoints-typischer-workflow">Typischer Workflow<a class="headerlink" href="#processors-pdf-endpoints-typischer-workflow" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Datei hochladen/URL angeben</strong></li>
<li><strong>Extraktionsmethode wählen</strong></li>
<li><strong>Template und Kontext definieren</strong> (optional)</li>
<li><strong>Verarbeitung starten</strong></li>
<li><strong>Ergebnis abrufen</strong></li>
<li><strong>Bei Bedarf Textinhalte über separate Endpoints abrufen</strong></li>
</ol>
<h3 id="processors-pdf-endpoints-python-integration">Python-Integration<a class="headerlink" href="#processors-pdf-endpoints-python-integration" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">requests</span>

<span class="c1"># PDF verarbeiten</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;dokument.pdf&#39;</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span>
        <span class="s1">&#39;http://localhost:8000/pdf/process&#39;</span><span class="p">,</span>
        <span class="n">files</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;file&#39;</span><span class="p">:</span> <span class="n">f</span><span class="p">},</span>
        <span class="n">data</span><span class="o">=</span><span class="p">{</span>
            <span class="s1">&#39;extraction_method&#39;</span><span class="p">:</span> <span class="s1">&#39;native&#39;</span><span class="p">,</span>
            <span class="s1">&#39;template&#39;</span><span class="p">:</span> <span class="s1">&#39;Metadata&#39;</span>
        <span class="p">}</span>
    <span class="p">)</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
<span class="n">extracted_text</span> <span class="o">=</span> <span class="n">result</span><span class="p">[</span><span class="s1">&#39;data&#39;</span><span class="p">][</span><span class="s1">&#39;extracted_text&#39;</span><span class="p">]</span>
</code></pre></div>
<h3 id="processors-pdf-endpoints-javascript-integration">JavaScript-Integration<a class="headerlink" href="#processors-pdf-endpoints-javascript-integration" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kd">const</span><span class="w"> </span><span class="nx">formData</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ow">new</span><span class="w"> </span><span class="nx">FormData</span><span class="p">();</span>
<span class="nx">formData</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">&#39;file&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">fileInput</span><span class="p">.</span><span class="nx">files</span><span class="p">[</span><span class="mf">0</span><span class="p">]);</span>
<span class="nx">formData</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s1">&#39;extraction_method&#39;</span><span class="p">,</span><span class="w"> </span><span class="s1">&#39;ocr&#39;</span><span class="p">);</span>

<span class="nx">fetch</span><span class="p">(</span><span class="s1">&#39;/imageocr/process&#39;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">method</span><span class="o">:</span><span class="w"> </span><span class="s1">&#39;POST&#39;</span><span class="p">,</span>
<span class="w">    </span><span class="nx">body</span><span class="o">:</span><span class="w"> </span><span class="nx">formData</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="nx">response</span><span class="p">.</span><span class="nx">json</span><span class="p">())</span>
<span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">data</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;OCR Result:&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">data</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">extracted_text</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div>
<h2 id="processors-pdf-endpoints-konfiguration">Konfiguration<a class="headerlink" href="#processors-pdf-endpoints-konfiguration" title="Permanent link">&para;</a></h2>
<h3 id="processors-pdf-endpoints-umgebungsvariablen">Umgebungsvariablen<a class="headerlink" href="#processors-pdf-endpoints-umgebungsvariablen" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># config.yaml</span>
<span class="nt">pdf_processor</span><span class="p">:</span>
<span class="w">  </span><span class="nt">temp_dir</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;./cache/pdf/&quot;</span>
<span class="w">  </span><span class="nt">max_file_size</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">100MB</span>
<span class="w">  </span><span class="nt">ocr_engine</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;tesseract&quot;</span>

<span class="nt">imageocr_processor</span><span class="p">:</span>
<span class="w">  </span><span class="nt">temp_dir</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;./cache/imageocr/&quot;</span>
<span class="w">  </span><span class="nt">max_file_size</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">50MB</span>
<span class="w">  </span><span class="nt">ocr_language</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;deu&quot;</span>

<span class="nt">cache</span><span class="p">:</span>
<span class="w">  </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">ttl</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">3600</span><span class="w">  </span><span class="c1"># 1 Stunde</span>
</code></pre></div>
<h3 id="processors-pdf-endpoints-sicherheitshinweise">Sicherheitshinweise<a class="headerlink" href="#processors-pdf-endpoints-sicherheitshinweise" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Dateigröße begrenzen</strong>: Maximal 100MB für PDFs, 50MB für Bilder</li>
<li><strong>Pfad-Validierung</strong>: Nur Cache-Verzeichnis-Zugriff erlaubt</li>
<li><strong>URL-Validierung</strong>: Nur HTTP/HTTPS-URLs erlaubt</li>
<li><strong>Temporäre Dateien</strong>: Werden automatisch nach Verarbeitung gelöscht</li>
</ol>
<h2 id="processors-pdf-endpoints-monitoring-und-logging">Monitoring und Logging<a class="headerlink" href="#processors-pdf-endpoints-monitoring-und-logging" title="Permanent link">&para;</a></h2>
<h3 id="processors-pdf-endpoints-log-ausgaben">Log-Ausgaben<a class="headerlink" href="#processors-pdf-endpoints-log-ausgaben" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code>2024-01-15 10:30:00 INFO [PDFProcessor] Started processing: dokument.pdf
2024-01-15 10:30:02 INFO [PDFProcessor] Extracted text: 1500 characters
2024-01-15 10:30:05 INFO [PDFProcessor] Completed processing: pdf_12345
</code></pre></div>
<h3 id="processors-pdf-endpoints-performance-metriken">Performance-Metriken<a class="headerlink" href="#processors-pdf-endpoints-performance-metriken" title="Permanent link">&para;</a></h3>
<ul>
<li>Verarbeitungszeit pro Datei</li>
<li>Cache-Trefferquote</li>
<li>Token-Verbrauch</li>
<li>Speichernutzung</li>
</ul>
<h2 id="processors-pdf-endpoints-erweiterte-funktionen">Erweiterte Funktionen<a class="headerlink" href="#processors-pdf-endpoints-erweiterte-funktionen" title="Permanent link">&para;</a></h2>
<h3 id="processors-pdf-endpoints-batch-verarbeitung">Batch-Verarbeitung<a class="headerlink" href="#processors-pdf-endpoints-batch-verarbeitung" title="Permanent link">&para;</a></h3>
<p>Für mehrere Dateien können Sie die Endpoints in Schleifen aufrufen:</p>
<div class="highlight"><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="k">for</span><span class="w"> </span>file<span class="w"> </span><span class="k">in</span><span class="w"> </span>*.pdf<span class="p">;</span><span class="w"> </span><span class="k">do</span>
<span class="w">    </span>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span><span class="s2">&quot;http://localhost:8000/pdf/process&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">      </span>-F<span class="w"> </span><span class="s2">&quot;file=@</span><span class="nv">$file</span><span class="s2">&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">      </span>-F<span class="w"> </span><span class="s2">&quot;extraction_method=native&quot;</span>
<span class="k">done</span>
</code></pre></div>
<h3 id="processors-pdf-endpoints-asynchrone-verarbeitung">Asynchrone Verarbeitung<a class="headerlink" href="#processors-pdf-endpoints-asynchrone-verarbeitung" title="Permanent link">&para;</a></h3>
<p>Beide Prozessoren unterstützen asynchrone Verarbeitung für bessere Performance bei großen Dateien.</p>
<h2 id="processors-pdf-endpoints-support-und-troubleshooting">Support und Troubleshooting<a class="headerlink" href="#processors-pdf-endpoints-support-und-troubleshooting" title="Permanent link">&para;</a></h2>
<h3 id="processors-pdf-endpoints-haufige-probleme">Häufige Probleme<a class="headerlink" href="#processors-pdf-endpoints-haufige-probleme" title="Permanent link">&para;</a></h3>
<ol>
<li><strong>Lange Verarbeitungszeiten</strong>: </li>
<li>Dateigröße reduzieren</li>
<li>Cache aktivieren</li>
<li>
<p>Richtige Extraktionsmethode wählen</p>
</li>
<li>
<p><strong>OCR-Qualität schlecht</strong>:</p>
</li>
<li>Bildqualität verbessern</li>
<li>Kontrast erhöhen</li>
<li>
<p>Richtige Sprache konfigurieren</p>
</li>
<li>
<p><strong>Template-Fehler</strong>:</p>
</li>
<li>Template-Syntax prüfen</li>
<li>Kontext-Parameter validieren</li>
<li>Logs für Details prüfen</li>
</ol>
<h3 id="processors-pdf-endpoints-debugging">Debugging<a class="headerlink" href="#processors-pdf-endpoints-debugging" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="c1"># Verbose Logging aktivieren</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">LOG_LEVEL</span><span class="o">=</span>DEBUG

<span class="c1"># Test mit kleiner Datei</span>
curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span><span class="s2">&quot;http://localhost:8000/pdf/process&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-F<span class="w"> </span><span class="s2">&quot;file=@test.pdf&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-F<span class="w"> </span><span class="s2">&quot;extraction_method=native&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-v
</code></pre></div>
<h2 id="processors-pdf-endpoints-fazit">Fazit<a class="headerlink" href="#processors-pdf-endpoints-fazit" title="Permanent link">&para;</a></h2>
<p>Die PDF- und ImageOCR-Prozessoren bieten eine umfassende Lösung für die Verarbeitung von Dokumenten und Bildern. Durch die flexible API, das Template-System und die verschiedenen Extraktionsmethoden können sie für eine Vielzahl von Anwendungsfällen eingesetzt werden.</p>
<p>Weitere Informationen finden Sie in der allgemeinen API-Dokumentation und den Processor-spezifischen Dokumentationen. </p></section></section><section class="print-page" id="processors-image-ocr-overview" heading-number="5.4"><h1 id="processors-image-ocr-overview-image-ocr-processor">Image OCR Processor<a class="headerlink" href="#processors-image-ocr-overview-image-ocr-processor" title="Permanent link">&para;</a></h1>
<h2 id="processors-image-ocr-overview-endpunkte">Endpunkte<a class="headerlink" href="#processors-image-ocr-overview-endpunkte" title="Permanent link">&para;</a></h2>
<ul>
<li>POST <code>/api/imageocr/process</code></li>
<li>POST <code>/api/imageocr/process-url</code></li>
</ul>
<h2 id="processors-image-ocr-overview-funktionen-kurz">Funktionen (Kurz)<a class="headerlink" href="#processors-image-ocr-overview-funktionen-kurz" title="Permanent link">&para;</a></h2>
<ul>
<li>Tesseract-OCR, optional LLM-OCR</li>
<li>Templates/Formatting</li>
<li>Cache-Unterstützung (MD5-Hash)</li>
</ul>
<h2 id="processors-image-ocr-overview-konfiguration-kurz">Konfiguration (Kurz)<a class="headerlink" href="#processors-image-ocr-overview-konfiguration-kurz" title="Permanent link">&para;</a></h2>
<ul>
<li><code>config/config.yaml</code>:
<div class="highlight"><pre><span></span><code><span class="nt">processors</span><span class="p">:</span>
<span class="w">  </span><span class="nt">openai</span><span class="p">:</span>
<span class="w">    </span><span class="nt">api_key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">${OPENAI_API_KEY}</span>
<span class="w">    </span><span class="nt">vision_model</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;gpt-4o&quot;</span>
<span class="w">    </span><span class="nt">max_image_size</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2048</span>
<span class="w">    </span><span class="nt">image_quality</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">85</span>
</code></pre></div></li>
<li><code>.env</code>: <code>OPENAI_API_KEY=...</code></li>
<li>Varianten: <code>gpt-4o</code> (Qualität), <code>gpt-4o-mini</code> (Kosten/Geschwindigkeit)</li>
</ul>
<h2 id="processors-image-ocr-overview-extraktionsmethoden">Extraktionsmethoden<a class="headerlink" href="#processors-image-ocr-overview-extraktionsmethoden" title="Permanent link">&para;</a></h2>
<ul>
<li><code>ocr</code> (Tesseract), <code>llm</code>, <code>llm_and_ocr</code></li>
</ul>
<h2 id="processors-image-ocr-overview-beispiele-curl">Beispiele (curl)<a class="headerlink" href="#processors-image-ocr-overview-beispiele-curl" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="c1"># LLM-OCR Bild</span>
curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>http://localhost:5000/api/imageocr/process<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-F<span class="w"> </span><span class="s2">&quot;file=@tests/samples/diagramm.jpg&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-F<span class="w"> </span><span class="s2">&quot;extraction_method=llm&quot;</span>
</code></pre></div>
<h2 id="processors-image-ocr-overview-best-practices">Best Practices<a class="headerlink" href="#processors-image-ocr-overview-best-practices" title="Permanent link">&para;</a></h2>
<ul>
<li>Dokumenttyp im <code>context</code> angeben (z. B. scientific, presentation)</li>
<li><code>max_image_size</code>/<code>image_quality</code> feinjustieren</li>
<li>Cache aktivieren, kombinierte Methoden für schwierige Dokumente</li>
</ul>
<h2 id="processors-image-ocr-overview-weiterfuhrend">Weiterführend<a class="headerlink" href="#processors-image-ocr-overview-weiterfuhrend" title="Permanent link">&para;</a></h2>
<ul>
<li>Historische Details im Archiv (<code>_archive/HowToUseimageocr.md</code>, <code>_archive/swagger_llm_ocr_integration.md</code>).</li>
</ul></section><section class="print-page" id="processors-transformer-overview" heading-number="5.5"><h1 id="processors-transformer-overview-transformer-processor">Transformer Processor<a class="headerlink" href="#processors-transformer-overview-transformer-processor" title="Permanent link">&para;</a></h1>
<h2 id="processors-transformer-overview-endpunkte">Endpunkte<a class="headerlink" href="#processors-transformer-overview-endpunkte" title="Permanent link">&para;</a></h2>
<ul>
<li>POST <code>/api/transformer/text</code></li>
<li>POST <code>/api/transformer/template</code></li>
<li>POST <code>/api/transformer/html-table</code></li>
<li>POST <code>/api/transformer/text/file</code></li>
<li>POST <code>/api/transformer/metadata</code></li>
</ul>
<h2 id="processors-transformer-overview-kurzbeschreibung">Kurzbeschreibung<a class="headerlink" href="#processors-transformer-overview-kurzbeschreibung" title="Permanent link">&para;</a></h2>
<ul>
<li><code>text</code>: Freitext-Transformation (Übersetzen, Zusammenfassen, Formatwechsel)</li>
<li><code>template</code>: Text oder URL anhand eines Templates in Struktur bringen</li>
<li><code>html-table</code>: HTML-Tabellen von Webseiten als JSON extrahieren</li>
<li><code>text/file</code>: Textdatei-Upload (.txt, .md) transformieren</li>
<li><code>metadata</code>: Metadaten-Extraktion für verschiedene Dateitypen</li>
</ul>
<h2 id="processors-transformer-overview-templates-kurz">Templates (kurz)<a class="headerlink" href="#processors-transformer-overview-templates-kurz" title="Permanent link">&para;</a></h2>
<ul>
<li>Templates liegen im Verzeichnis <code>templates/</code> (Markdown)</li>
<li>Entspricht <code>POST /api/transformer/template</code></li>
<li>Details siehe: <a href="#explanations-templates-overview">Templates Übersicht</a></li>
</ul></section><section class="print-page" id="processors-session-overview" heading-number="5.6"><h1 id="processors-session-overview-session-processor">Session Processor<a class="headerlink" href="#processors-session-overview-session-processor" title="Permanent link">&para;</a></h1>
<h2 id="processors-session-overview-endpunkte">Endpunkte<a class="headerlink" href="#processors-session-overview-endpunkte" title="Permanent link">&para;</a></h2>
<ul>
<li>POST <code>/api/session/process</code></li>
<li>POST <code>/api/session/process-async</code> (Platzhalter)</li>
<li>GET  <code>/api/session/cached</code></li>
</ul>
<h2 id="processors-session-overview-post-apisessionprocess-json">POST /api/session/process (JSON)<a class="headerlink" href="#processors-session-overview-post-apisessionprocess-json" title="Permanent link">&para;</a></h2>
<p>Pflichtfelder: <code>event</code>, <code>session</code>, <code>url</code>, <code>filename</code>, <code>track</code>
Optionale Felder: <code>day</code>, <code>starttime</code>, <code>endtime</code>, <code>speakers</code>, <code>video_url</code>, <code>attachments_url</code>, <code>source_language</code>, <code>target_language</code>, <code>target</code>, <code>template</code>, <code>use_cache</code>, <code>create_archive</code></p>
<p>Beispiel (Kurz):
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>http://localhost:5000/api/session/process<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s1">&#39;Content-Type: application/json&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span><span class="s1">&#39;{&quot;event&quot;:&quot;FOSDEM&quot;,&quot;session&quot;:&quot;Talk&quot;,&quot;url&quot;:&quot;https://...&quot;,&quot;filename&quot;:&quot;talk.md&quot;,&quot;track&quot;:&quot;ecosocial&quot;}&#39;</span>
</code></pre></div></p>
<h2 id="processors-session-overview-get-apisessioncached">GET /api/session/cached<a class="headerlink" href="#processors-session-overview-get-apisessioncached" title="Permanent link">&para;</a></h2>
<p>Gibt eine flache Liste gecachter Sessions zurück.</p></section><section class="print-page" id="processors-event-job-overview" heading-number="5.7"><h1 id="processors-event-job-overview-event-job-api">Event-Job API<a class="headerlink" href="#processors-event-job-overview-event-job-api" title="Permanent link">&para;</a></h1>
<h2 id="processors-event-job-overview-endpunkte-auszug">Endpunkte (Auszug)<a class="headerlink" href="#processors-event-job-overview-endpunkte-auszug" title="Permanent link">&para;</a></h2>
<ul>
<li>Jobs</li>
<li>POST <code>/api/event-job/jobs</code> (Job erstellen)</li>
<li>GET  <code>/api/event-job/jobs</code> (Jobs auflisten, Filter: status, batch_id, user_id, limit, skip)</li>
<li>GET  <code>/api/event-job/jobs/{job_id}</code> (Details)</li>
<li>DELETE <code>/api/event-job/jobs/{job_id}</code> (löschen)</li>
<li>GET  <code>/api/event-job/jobs/{job_id}/download-archive</code> (ZIP)</li>
<li>Batches</li>
<li>POST <code>/api/event-job/batches</code> (Batch erstellen)</li>
<li>GET  <code>/api/event-job/batches</code> (Batches auflisten)</li>
<li>GET  <code>/api/event-job/batches/{batch_id}</code> (Details)</li>
<li>DELETE <code>/api/event-job/batches/{batch_id}</code> (löschen)</li>
<li>POST <code>/api/event-job/batches/{batch_id}/archive</code> (archivieren)</li>
<li>POST <code>/api/event-job/batches/{batch_id}/toggle-active</code> (aktiv/inaktiv)</li>
<li>POST <code>/api/event-job/batches/fail-all</code> (alle auf failed setzen)</li>
<li>Dateien</li>
<li>GET  <code>/api/event-job/files/{path}</code> (Dateien bereitstellen)</li>
</ul>
<h2 id="processors-event-job-overview-beispiele-curl">Beispiele (cURL)<a class="headerlink" href="#processors-event-job-overview-beispiele-curl" title="Permanent link">&para;</a></h2>
<p>Job erstellen:
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>http://localhost:5000/api/event-job/jobs<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s1">&#39;Content-Type: application/json&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<span class="s1">    &quot;parameters&quot;: {</span>
<span class="s1">      &quot;event&quot;: &quot;FOSDEM 2025&quot;,</span>
<span class="s1">      &quot;session&quot;: &quot;Talk 01&quot;,</span>
<span class="s1">      &quot;url&quot;: &quot;https://example.org/session&quot;,</span>
<span class="s1">      &quot;filename&quot;: &quot;Talk_01.md&quot;,</span>
<span class="s1">      &quot;track&quot;: &quot;ecosocial&quot;,</span>
<span class="s1">      &quot;use_cache&quot;: true</span>
<span class="s1">    },</span>
<span class="s1">    &quot;job_name&quot;: &quot;FOSDEM - ecosocial - Talk 01&quot;</span>
<span class="s1">  }&#39;</span>
</code></pre></div></p>
<p>Batch erstellen:
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-X<span class="w"> </span>POST<span class="w"> </span>http://localhost:5000/api/event-job/batches<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-H<span class="w"> </span><span class="s1">&#39;Content-Type: application/json&#39;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-d<span class="w"> </span><span class="s1">&#39;{</span>
<span class="s1">    &quot;batch_name&quot;: &quot;FOSDEM ecosocial&quot;,</span>
<span class="s1">    &quot;jobs&quot;: [</span>
<span class="s1">      {&quot;parameters&quot;: {&quot;event&quot;:&quot;FOSDEM&quot;,&quot;session&quot;:&quot;T1&quot;,&quot;url&quot;:&quot;https://...&quot;,&quot;filename&quot;:&quot;t1.md&quot;,&quot;track&quot;:&quot;ecosocial&quot;}},</span>
<span class="s1">      {&quot;parameters&quot;: {&quot;event&quot;:&quot;FOSDEM&quot;,&quot;session&quot;:&quot;T2&quot;,&quot;url&quot;:&quot;https://...&quot;,&quot;filename&quot;:&quot;t2.md&quot;,&quot;track&quot;:&quot;ecosocial&quot;}}</span>
<span class="s1">    ]</span>
<span class="s1">  }&#39;</span>
</code></pre></div></p>
<p>ZIP herunterladen:
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-L<span class="w"> </span>-o<span class="w"> </span>result.zip<span class="w"> </span>http://localhost:5000/api/event-job/jobs/&lt;JOB_ID&gt;/download-archive
</code></pre></div></p>
<h2 id="processors-event-job-overview-hinweise">Hinweise<a class="headerlink" href="#processors-event-job-overview-hinweise" title="Permanent link">&para;</a></h2>
<ul>
<li>Zugriffskontrolle per <code>X-User-ID</code> Header berücksichtigt.</li>
<li>Rückgaben enthalten Status und Daten; Fehler liefern <code>status: error</code> mit Details.</li>
</ul>
<h2 id="processors-event-job-overview-troubleshooting-kurz">Troubleshooting (Kurz)<a class="headerlink" href="#processors-event-job-overview-troubleshooting-kurz" title="Permanent link">&para;</a></h2>
<ul>
<li>404 beim ZIP-Download: Prüfe, ob der Job Ergebnisse und ein Archiv enthält.</li>
<li>403 bei Details/Löschen: <code>X-User-ID</code> stimmt nicht mit <code>job.user_id</code> überein oder fehlt Schreib-/Leserechte.</li>
</ul></section><section class="print-page" id="processors-story-overview" heading-number="5.8"><h1 id="processors-story-overview-story-processor">Story Processor<a class="headerlink" href="#processors-story-overview-story-processor" title="Permanent link">&para;</a></h1>
<h2 id="processors-story-overview-endpunkte">Endpunkte<a class="headerlink" href="#processors-story-overview-endpunkte" title="Permanent link">&para;</a></h2>
<ul>
<li>POST <code>/api/story/generate</code></li>
<li>GET  <code>/api/story/topics</code></li>
<li>GET  <code>/api/story/target-groups</code></li>
</ul>
<h2 id="processors-story-overview-nutzung-kurz">Nutzung (Kurz)<a class="headerlink" href="#processors-story-overview-nutzung-kurz" title="Permanent link">&para;</a></h2>
<ul>
<li><code>generate</code>: erzeugt Story‑Inhalte aus Eingaben/Kontexten (Thema, Zielgruppe, Event/Session‑Daten)</li>
<li><code>topics</code>, <code>target-groups</code>: unterstützen UI/Dropdowns</li>
</ul>
<h2 id="processors-story-overview-hinweise">Hinweise<a class="headerlink" href="#processors-story-overview-hinweise" title="Permanent link">&para;</a></h2>
<ul>
<li>Einheitliche Response‑Struktur (<code>status/request/process/data/error</code>)</li>
<li>LLM‑Tracking in <code>process.llm_info</code></li>
</ul></section><section class="print-page" id="processors-track-overview" heading-number="5.9"><h1 id="processors-track-overview-track-processor">Track Processor<a class="headerlink" href="#processors-track-overview-track-processor" title="Permanent link">&para;</a></h1>
<h2 id="processors-track-overview-endpunkte">Endpunkte<a class="headerlink" href="#processors-track-overview-endpunkte" title="Permanent link">&para;</a></h2>
<ul>
<li>POST <code>/api/tracks/&lt;track_name&gt;/summary</code></li>
<li>GET  <code>/api/tracks/available</code></li>
<li>POST <code>/api/tracks/&lt;track_name&gt;/summarize_all</code></li>
</ul>
<h2 id="processors-track-overview-nutzung-kurz">Nutzung (Kurz)<a class="headerlink" href="#processors-track-overview-nutzung-kurz" title="Permanent link">&para;</a></h2>
<ul>
<li><code>available</code>: liefert verfügbare Tracks (z. B. aus Events)</li>
<li><code>summary</code>: erzeugt Zusammenfassung für einen Track</li>
<li><code>summarize_all</code>: Batch‑Zusammenfassungen</li>
</ul></section></section>
                    <section class='print-page md-section' id='section-6' heading-number='6'>
                        <h1>Reference<a class='headerlink' href='#section-6' title='Permanent link'></a>
                        </h1>
                    <section class="print-page" id="reference-api-overview" heading-number="6.1"><h1 id="reference-api-overview-api-uberblick">API Überblick<a class="headerlink" href="#reference-api-overview-api-uberblick" title="Permanent link">&para;</a></h1>
<ul>
<li>Basis: <code>/api</code></li>
<li>Swagger UI: <code>/api/doc</code></li>
<li>OpenAPI JSON (RESTX): <code>/api/swagger.json</code></li>
</ul>
<h2 id="reference-api-overview-response-standard">Response-Standard<a class="headerlink" href="#reference-api-overview-response-standard" title="Permanent link">&para;</a></h2>
<ul>
<li>Felder: <code>status</code> (success/error), <code>request</code>, <code>process</code>, <code>data</code>, <code>error</code></li>
<li>LLM‑Tracking in <code>process.llm_info</code></li>
<li>Zeitangaben in Millisekunden (<code>process.duration_ms</code>)</li>
</ul>
<p>Weitere Details und Beispiele: <a href="#reference-api-response-structure">Response‑Struktur</a></p>
<h2 id="reference-api-overview-aufrufablauf-synchron">Aufrufablauf (synchron)<a class="headerlink" href="#reference-api-overview-aufrufablauf-synchron" title="Permanent link">&para;</a></h2>
<pre class="mermaid"><code>sequenceDiagram
  participant Client
  participant API as API Route
  participant P as Processor
  participant Cache
  participant LLM as LLM Service

  Client-&gt;&gt;API: HTTP POST /api/{processor}
  API-&gt;&gt;P: create(process_id, req)
  P-&gt;&gt;Cache: get(key)
  alt Cache hit
    Cache--&gt;&gt;P: result
  else Miss
    P-&gt;&gt;LLM: optional calls
    LLM--&gt;&gt;P: output + tokens
    P-&gt;&gt;Cache: put(key, result)
  end
  P--&gt;&gt;API: BaseResponse{status, request, process, data, error}
  API--&gt;&gt;Client: JSON</code></pre>
<h2 id="reference-api-overview-wichtige-endpunkte">Wichtige Endpunkte<a class="headerlink" href="#reference-api-overview-wichtige-endpunkte" title="Permanent link">&para;</a></h2>
<ul>
<li>Audio: <code>POST /api/audio/process</code></li>
<li>Video: <code>POST /api/video/process</code></li>
<li>PDF: <code>POST /api/pdf/process</code>, <code>POST /api/pdf/process-url</code></li>
<li>ImageOCR: <code>POST /api/imageocr/process</code>, <code>POST /api/imageocr/process-url</code></li>
<li>Session: <code>POST /api/session/process</code>, <code>POST /api/session/process-async</code></li>
<li>Event-Job: <code>POST/GET /api/event-job/jobs</code>, <code>GET /api/event-job/jobs/{id}</code></li>
<li>Transformer: <code>POST /api/transformer/template</code>, <code>POST /api/transformer/text</code>, <code>POST /api/transformer/html-table</code>, <code>POST /api/transformer/text/file</code>, <code>POST /api/transformer/metadata</code></li>
</ul></section><section class="print-page" id="reference-api-openapi" heading-number="6.2"><h1 id="reference-api-openapi-openapi-swagger">OpenAPI / Swagger<a class="headerlink" href="#reference-api-openapi-openapi-swagger" title="Permanent link">&para;</a></h1>
<ul>
<li>Swagger UI: <code>http://localhost:5000/api/doc</code></li>
<li>OpenAPI JSON: <code>http://localhost:5000/api/swagger.json</code></li>
</ul>
<h2 id="reference-api-openapi-json-abrufen">JSON abrufen<a class="headerlink" href="#reference-api-openapi-json-abrufen" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code>curl<span class="w"> </span>-s<span class="w"> </span>http://localhost:5000/api/swagger.json<span class="w"> </span>-o<span class="w"> </span>openapi.json
</code></pre></div>
<p>Die Swagger UI ist die primäre Referenz. Die JSON kann für externe Tools (z. B. SDK‑Generierung) genutzt werden.</p></section></section>
                    <section class='print-page md-section' id='section-7' heading-number='7'>
                        <h1>Ops<a class='headerlink' href='#section-7' title='Permanent link'></a>
                        </h1>
                    <section class="print-page" id="ops-deployment" heading-number="7.1"><h1 id="ops-deployment-deployment">Deployment<a class="headerlink" href="#ops-deployment-deployment" title="Permanent link">&para;</a></h1>
<h2 id="ops-deployment-lokal">Lokal<a class="headerlink" href="#ops-deployment-lokal" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="n">venv</span><span class="p">\</span><span class="n">Scripts</span><span class="p">\</span><span class="n">activate</span>
<span class="nv">$env:PYTHONPATH</span> <span class="p">=</span> <span class="s2">&quot;.&quot;</span>
<span class="n">python</span> <span class="n">src</span><span class="p">/</span><span class="n">main</span><span class="p">.</span><span class="n">py</span>
</code></pre></div>
<h2 id="ops-deployment-docker">Docker<a class="headerlink" href="#ops-deployment-docker" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code>docker<span class="w"> </span>build<span class="w"> </span>-t<span class="w"> </span>secretary-services<span class="w"> </span>.
docker<span class="w"> </span>run<span class="w"> </span>-p<span class="w"> </span><span class="m">5000</span>:5000<span class="w"> </span>secretary-services
</code></pre></div>
<h2 id="ops-deployment-compose">Compose<a class="headerlink" href="#ops-deployment-compose" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="nt">services</span><span class="p">:</span>
<span class="w">  </span><span class="nt">api</span><span class="p">:</span>
<span class="w">    </span><span class="nt">build</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">.</span>
<span class="w">    </span><span class="nt">ports</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="s">&quot;5000:5000&quot;</span><span class="p p-Indicator">]</span>
<span class="w">    </span><span class="nt">env_file</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">.env</span>
</code></pre></div>
<h2 id="ops-deployment-gesundheit-tests">Gesundheit &amp; Tests<a class="headerlink" href="#ops-deployment-gesundheit-tests" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code>pytest<span class="w"> </span>-q
curl<span class="w"> </span>http://localhost:5000/api/doc
</code></pre></div></section><section class="print-page" id="ops-security" heading-number="7.2"><h1 id="ops-security-sicherheit">Sicherheit<a class="headerlink" href="#ops-security-sicherheit" title="Permanent link">&para;</a></h1>
<h2 id="ops-security-grundsatze">Grundsätze<a class="headerlink" href="#ops-security-grundsatze" title="Permanent link">&para;</a></h2>
<ul>
<li>API‑Keys in <code>.env</code>, nie im Repo</li>
<li>HTTPS, HSTS, sichere Headers (CSP, X-Content-Type-Options, X-Frame-Options)</li>
<li>Rate‑Limiting auf API‑Layer</li>
<li>Eingabevalidierung in API und Prozessoren</li>
</ul>
<h2 id="ops-security-zugriff-berechtigungen">Zugriff &amp; Berechtigungen<a class="headerlink" href="#ops-security-zugriff-berechtigungen" title="Permanent link">&para;</a></h2>
<ul>
<li><code>X-User-ID</code> für Jobs/Batches (Lesen/Schreiben prüfen)</li>
<li>Download‑Endpunkte prüfen Pfade (z. B. <code>samples</code>, <code>files</code>)</li>
</ul>
<h2 id="ops-security-logging-monitoring">Logging &amp; Monitoring<a class="headerlink" href="#ops-security-logging-monitoring" title="Permanent link">&para;</a></h2>
<ul>
<li>Fehler/Tracebacks in Logs, sensible Inhalte vermeiden</li>
<li>LLM‑Tracking ohne PII in <code>process.llm_info</code></li>
</ul>
<h2 id="ops-security-betrieb">Betrieb<a class="headerlink" href="#ops-security-betrieb" title="Permanent link">&para;</a></h2>
<ul>
<li>Secrets Rotation, least privilege, Firewall/CORS passend konfigurieren</li>
</ul></section><section class="print-page" id="ops-troubleshooting" heading-number="7.3"><h1 id="ops-troubleshooting-troubleshooting">Troubleshooting<a class="headerlink" href="#ops-troubleshooting-troubleshooting" title="Permanent link">&para;</a></h1>
<h2 id="ops-troubleshooting-haufige-probleme">Häufige Probleme<a class="headerlink" href="#ops-troubleshooting-haufige-probleme" title="Permanent link">&para;</a></h2>
<ul>
<li>400 INVALID_CONTENT_TYPE: multipart/form-data fehlt (Audio/Image)</li>
<li>404 Datei nicht gefunden: Pfad außerhalb erlaubter Verzeichnisse</li>
<li>403 Permission denied: <code>X-User-ID</code> stimmt nicht</li>
<li>500 ProcessingError: Stacktrace in Logs prüfen</li>
</ul>
<h2 id="ops-troubleshooting-checks">Checks<a class="headerlink" href="#ops-troubleshooting-checks" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><span class="c1"># API erreichbar?</span>
curl<span class="w"> </span>-sSf<span class="w"> </span>http://localhost:5000/api/doc<span class="w"> </span>&gt;<span class="w"> </span>/dev/null
<span class="c1"># Swagger JSON</span>
curl<span class="w"> </span>-sSf<span class="w"> </span>http://localhost:5000/api/swagger.json<span class="w"> </span>&gt;<span class="w"> </span>/dev/null
<span class="c1"># Tests</span>
pytest<span class="w"> </span>-q
</code></pre></div>
<h2 id="ops-troubleshooting-logs">Logs<a class="headerlink" href="#ops-troubleshooting-logs" title="Permanent link">&para;</a></h2>
<ul>
<li><code>logs/</code> Dateien sichten</li>
<li>DEBUG einschalten (temporär) in <code>config.yaml</code></li>
</ul></section></section></div><style>.print-site-enumerate-headings #index > h1:before { content: '2 ' }

                .print-site-enumerate-headings #index h2:before { content: '2.' counter(counter-index-2) ' ' }
                .print-site-enumerate-headings #index h2 {  counter-reset: counter-index-3 ;  counter-increment: counter-index-2 }
            
                .print-site-enumerate-headings #index h3:before { content: '2.' counter(counter-index-2) '.' counter(counter-index-3) ' ' }
                .print-site-enumerate-headings #index h3 {  counter-increment: counter-index-3 }
            
.print-site-enumerate-headings #section-3 > h1:before { content: '3 ' }
.print-site-enumerate-headings #section-3-1 > h1:before { content: '3.1 ' }
.print-site-enumerate-headings #guide-getting-started-installation > h1:before { content: '3.1.1 ' }

.print-site-enumerate-headings #guide-getting-started-development > h1:before { content: '3.1.2 ' }

.print-site-enumerate-headings #section-3-2 > h1:before { content: '3.2 ' }
.print-site-enumerate-headings #guide-ui-dashboard > h1:before { content: '3.2.1 ' }

.print-site-enumerate-headings #section-3-3 > h1:before { content: '3.3 ' }
.print-site-enumerate-headings #guide-how-tos-session-archive > h1:before { content: '3.3.1 ' }

.print-site-enumerate-headings #section-4 > h1:before { content: '4 ' }
.print-site-enumerate-headings #section-4-1 > h1:before { content: '4.1 ' }
.print-site-enumerate-headings #explanations-architecture-overview > h1:before { content: '4.1.1 ' }

.print-site-enumerate-headings #explanations-architecture-details > h1:before { content: '4.1.2 ' }

.print-site-enumerate-headings #section-4-2 > h1:before { content: '4.2 ' }
.print-site-enumerate-headings #explanations-async-events-overview > h1:before { content: '4.2.1 ' }

.print-site-enumerate-headings #explanations-async-events-generic-worker > h1:before { content: '4.2.2 ' }

.print-site-enumerate-headings #explanations-async-events-secretary-job-worker-concept > h1:before { content: '4.2.3 ' }

.print-site-enumerate-headings #explanations-async-events-how-to-n8n > h1:before { content: '4.2.4 ' }

.print-site-enumerate-headings #explanations-caching-overview > h1:before { content: '4.3 ' }

                .print-site-enumerate-headings #explanations-caching-overview h2:before { content: '4.3.' counter(counter-explanations-caching-overview-2) ' ' }
                .print-site-enumerate-headings #explanations-caching-overview h2 {  counter-increment: counter-explanations-caching-overview-2 }
            
.print-site-enumerate-headings #explanations-templates-overview > h1:before { content: '4.4 ' }

                .print-site-enumerate-headings #explanations-templates-overview h2:before { content: '4.4.' counter(counter-explanations-templates-overview-2) ' ' }
                .print-site-enumerate-headings #explanations-templates-overview h2 {  counter-increment: counter-explanations-templates-overview-2 }
            
.print-site-enumerate-headings #explanations-types-overview > h1:before { content: '4.5 ' }

                .print-site-enumerate-headings #explanations-types-overview h2:before { content: '4.5.' counter(counter-explanations-types-overview-2) ' ' }
                .print-site-enumerate-headings #explanations-types-overview h2 {  counter-increment: counter-explanations-types-overview-2 }
            
.print-site-enumerate-headings #explanations-metaprocessor-overview > h1:before { content: '4.6 ' }

                .print-site-enumerate-headings #explanations-metaprocessor-overview h2:before { content: '4.6.' counter(counter-explanations-metaprocessor-overview-2) ' ' }
                .print-site-enumerate-headings #explanations-metaprocessor-overview h2 {  counter-increment: counter-explanations-metaprocessor-overview-2 }
            
.print-site-enumerate-headings #explanations-metadata-overview > h1:before { content: '4.7 ' }

                .print-site-enumerate-headings #explanations-metadata-overview h2:before { content: '4.7.' counter(counter-explanations-metadata-overview-2) ' ' }
                .print-site-enumerate-headings #explanations-metadata-overview h2 {  counter-increment: counter-explanations-metadata-overview-2 }
            
.print-site-enumerate-headings #explanations-llm-optimization > h1:before { content: '4.8 ' }

                .print-site-enumerate-headings #explanations-llm-optimization h2:before { content: '4.8.' counter(counter-explanations-llm-optimization-2) ' ' }
                .print-site-enumerate-headings #explanations-llm-optimization h2 {  counter-increment: counter-explanations-llm-optimization-2 }
            
.print-site-enumerate-headings #section-5 > h1:before { content: '5 ' }
.print-site-enumerate-headings #processors-audio-overview > h1:before { content: '5.1 ' }

                .print-site-enumerate-headings #processors-audio-overview h2:before { content: '5.1.' counter(counter-processors-audio-overview-2) ' ' }
                .print-site-enumerate-headings #processors-audio-overview h2 {  counter-increment: counter-processors-audio-overview-2 }
            
.print-site-enumerate-headings #processors-video-overview > h1:before { content: '5.2 ' }

                .print-site-enumerate-headings #processors-video-overview h2:before { content: '5.2.' counter(counter-processors-video-overview-2) ' ' }
                .print-site-enumerate-headings #processors-video-overview h2 {  counter-increment: counter-processors-video-overview-2 }
            
.print-site-enumerate-headings #section-5-3 > h1:before { content: '5.3 ' }
.print-site-enumerate-headings #processors-pdf-overview > h1:before { content: '5.3.1 ' }

.print-site-enumerate-headings #processors-pdf-ocr-refactoring > h1:before { content: '5.3.2 ' }

.print-site-enumerate-headings #processors-pdf-endpoints > h1:before { content: '5.3.3 ' }

.print-site-enumerate-headings #processors-image-ocr-overview > h1:before { content: '5.4 ' }

                .print-site-enumerate-headings #processors-image-ocr-overview h2:before { content: '5.4.' counter(counter-processors-image-ocr-overview-2) ' ' }
                .print-site-enumerate-headings #processors-image-ocr-overview h2 {  counter-increment: counter-processors-image-ocr-overview-2 }
            
.print-site-enumerate-headings #processors-transformer-overview > h1:before { content: '5.5 ' }

                .print-site-enumerate-headings #processors-transformer-overview h2:before { content: '5.5.' counter(counter-processors-transformer-overview-2) ' ' }
                .print-site-enumerate-headings #processors-transformer-overview h2 {  counter-increment: counter-processors-transformer-overview-2 }
            
.print-site-enumerate-headings #processors-session-overview > h1:before { content: '5.6 ' }

                .print-site-enumerate-headings #processors-session-overview h2:before { content: '5.6.' counter(counter-processors-session-overview-2) ' ' }
                .print-site-enumerate-headings #processors-session-overview h2 {  counter-increment: counter-processors-session-overview-2 }
            
.print-site-enumerate-headings #processors-event-job-overview > h1:before { content: '5.7 ' }

                .print-site-enumerate-headings #processors-event-job-overview h2:before { content: '5.7.' counter(counter-processors-event-job-overview-2) ' ' }
                .print-site-enumerate-headings #processors-event-job-overview h2 {  counter-increment: counter-processors-event-job-overview-2 }
            
.print-site-enumerate-headings #processors-story-overview > h1:before { content: '5.8 ' }

                .print-site-enumerate-headings #processors-story-overview h2:before { content: '5.8.' counter(counter-processors-story-overview-2) ' ' }
                .print-site-enumerate-headings #processors-story-overview h2 {  counter-increment: counter-processors-story-overview-2 }
            
.print-site-enumerate-headings #processors-track-overview > h1:before { content: '5.9 ' }

                .print-site-enumerate-headings #processors-track-overview h2:before { content: '5.9.' counter(counter-processors-track-overview-2) ' ' }
                .print-site-enumerate-headings #processors-track-overview h2 {  counter-increment: counter-processors-track-overview-2 }
            
.print-site-enumerate-headings #section-6 > h1:before { content: '6 ' }
.print-site-enumerate-headings #reference-api-overview > h1:before { content: '6.1 ' }

                .print-site-enumerate-headings #reference-api-overview h2:before { content: '6.1.' counter(counter-reference-api-overview-2) ' ' }
                .print-site-enumerate-headings #reference-api-overview h2 {  counter-increment: counter-reference-api-overview-2 }
            
.print-site-enumerate-headings #reference-api-openapi > h1:before { content: '6.2 ' }

                .print-site-enumerate-headings #reference-api-openapi h2:before { content: '6.2.' counter(counter-reference-api-openapi-2) ' ' }
                .print-site-enumerate-headings #reference-api-openapi h2 {  counter-increment: counter-reference-api-openapi-2 }
            
.print-site-enumerate-headings #section-7 > h1:before { content: '7 ' }
.print-site-enumerate-headings #ops-deployment > h1:before { content: '7.1 ' }

                .print-site-enumerate-headings #ops-deployment h2:before { content: '7.1.' counter(counter-ops-deployment-2) ' ' }
                .print-site-enumerate-headings #ops-deployment h2 {  counter-increment: counter-ops-deployment-2 }
            
.print-site-enumerate-headings #ops-security > h1:before { content: '7.2 ' }

                .print-site-enumerate-headings #ops-security h2:before { content: '7.2.' counter(counter-ops-security-2) ' ' }
                .print-site-enumerate-headings #ops-security h2 {  counter-increment: counter-ops-security-2 }
            
.print-site-enumerate-headings #ops-troubleshooting > h1:before { content: '7.3 ' }

                .print-site-enumerate-headings #ops-troubleshooting h2:before { content: '7.3.' counter(counter-ops-troubleshooting-2) ' ' }
                .print-site-enumerate-headings #ops-troubleshooting h2 {  counter-increment: counter-ops-troubleshooting-2 }
            </style>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "/", "features": [], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "In Zwischenablage kopiert", "clipboard.copy": "In Zwischenablage kopieren", "search.result.more.one": "1 weiteres Suchergebnis auf dieser Seite", "search.result.more.other": "# weitere Suchergebnisse auf dieser Seite", "search.result.none": "Keine Suchergebnisse", "search.result.one": "1 Suchergebnis", "search.result.other": "# Suchergebnisse", "search.result.placeholder": "Suchbegriff eingeben", "search.result.term.missing": "Es fehlt", "select.version": "Version ausw\u00e4hlen"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.92b07e13.min.js"></script>
      
        <script src="../js/print-site.js"></script>
      
        <script src="https://unpkg.com/mermaid@10/dist/mermaid.min.js"></script>
      
        <script src="../assets/js/mermaid-init.js"></script>
      
    
  </body>
</html>